<html><head><meta http-equiv="Content-Type" content="text/html; charset=KOI8-R"><title>5.2. Поддерживаемые кодеки</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - The Movie Player"><link rel="up" href="features.html" title="Глава 5. Возможности"><link rel="prev" href="formats.html" title="5.1. Поддерживаемые форматы"><link rel="next" href="tv-input.html" title="5.3. TV вход"><link rel="preface" href="howtoread.html" title="Как читать эту документацию"><link rel="chapter" href="intro.html" title="Глава 1. Введение"><link rel="chapter" href="usage.html" title="Глава 2. Использование"><link rel="chapter" href="cd-dvd.html" title="Глава 3. Использование CD/DVD"><link rel="chapter" href="faq.html" title="Глава 4. Frequently Asked Questions"><link rel="chapter" href="features.html" title="Глава 5. Возможности"><link rel="chapter" href="video.html" title="Глава 6. Video output devices"><link rel="chapter" href="audio.html" title="Глава 7. Audio output devices"><link rel="chapter" href="ports.html" title="Глава 8. Портинг"><link rel="chapter" href="mencoder.html" title="Глава 9. Basic usage of MEncoder"><link rel="chapter" href="encoding-guide.html" title="Глава 10. Encoding with MEncoder"><link rel="appendix" href="mailinglists.html" title="Приложение A. Почтовые рассылки"><link rel="appendix" href="bugreports.html" title="Приложение B. Как сообщать об ошибках"><link rel="appendix" href="bugs.html" title="Приложение C. Известные проблемы"><link rel="appendix" href="skin.html" title="Приложение D. MPlayer skin format"><link rel="appendix" href="users-vs-dev.html" title="Приложение E. Плач разработчиков"><link rel="subsection" href="codecs.html#video-codecs" title="5.2.1. Видео кодеки"><link rel="subsection" href="codecs.html#audio-codecs" title="5.2.2. Аудио кодеки"><link rel="subsection" href="codecs.html#codec-importing" title="5.2.3. КАК извлечь кодек из Win32"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.2. Поддерживаемые кодеки</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="formats.html">Пред.</a> </td><th width="60%" align="center">Глава 5. Возможности</th><td width="20%" align="right"> <a accesskey="n" href="tv-input.html">След.</a></td></tr></table><hr></div><div class="sect1" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="codecs"></a>5.2. Поддерживаемые кодеки</h2></div></div></div><div class="sect2" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="video-codecs"></a>5.2.1. Видео кодеки</h3></div></div></div><p>
См. <a href="../../codecs-status.html" target="_top">таблицу статуса кодеков</a>
для полного, ежедневно генерируемого списка. Несколько кодеков доступны для
скачивания на нашей странице. Получите их со 
<a href="http://www.mplayerhq.hu/MPlayer/releases/codecs/" target="_top">страницы кодеков</a>.
</p><p>
Наиболее важные кодеки:
</p><div class="itemizedlist"><ul type="disc"><li>
  <span class="bold"><strong>MPEG1</strong></span> (<span class="bold"><strong>VCD</strong></span>) и
  <span class="bold"><strong>MPEG2</strong></span> (<span class="bold"><strong>DVD</strong></span>) видео
  </li><li>
  "родные" декодеры для <span class="bold"><strong>DivX ;-), OpenDivX (DivX4),
  DivX (Pro), 3ivX, M$ MPEG4</strong></span> v1, v2 и других вариантов MPEG4.
  </li><li>
  "родной" декодер для <span class="bold"><strong>Windows Media Video 7/8</strong></span>
  (<span class="bold"><strong>WMV1/WMV2</strong></span>), и Win32 DLL декодер
  для <span class="bold"><strong>Windows Media Video 9</strong></span>
  (<span class="bold"><strong>WMV3</strong></span>), оба используются в <tt class="filename">.wmv
  </tt> файлах
  </li><li>
  "родной" <span class="bold"><strong>Sorenson 1 (SVQ1)</strong></span> декодер
  </li><li>
  "родной" <span class="bold"><strong>Sorenson 3 (SVQ3)</strong></span> декодер
  </li><li>
  <span class="bold"><strong>3ivx</strong></span> v1, v2 декодер
  </li><li>
  Cinepak и <span class="bold"><strong>Intel Indeo</strong></span> кодеки (3.1,3.2,4.1,5.0)
  </li><li>
  <span class="bold"><strong>MJPEG</strong></span>, AVID, VCR2, ASV2 и другие аппаратные
  форматы
  </li><li>
  VIVO 1.0, 2.0, I263 и другие <span class="bold"><strong>h263(+)</strong></span> варианты
  </li><li>
  FLI/FLC
  </li><li>
  <span class="bold"><strong>RealVideo 1.0 &amp; 2.0 </strong></span> из
  <code class="systemitem">libavcodec</code>, и
  <span class="bold"><strong>RealVideo 3.0 &amp; 4.0</strong></span> кодеки, используя 
  библиотеки RealPlayer
  </li><li>
  "родной" декодер для HuffYUV
  </li><li>
  Различные старые, похожие на RLE форматы
  </li></ul></div><p>
Если у Вас есть не упомянутый здесь Win32 кодек, который ещё не поддерживается,
пожалуйста, прочтите <a href="codecs.html#codec-importing" title="5.2.3. КАК извлечь кодек из Win32">Как добавить кодек [codec
importing HOWTO]</a> и помогите нам добавить для него поддержку.
</p><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="divx4-5"></a>5.2.1.1. DivX4/DivX5</h4></div></div></div><p>
Эта секция содержит информацию о DivX4 b DivX5 кодеках от
<a href="http://www.projectmayo.com" target="_top">Project Mayo</a>.
Их первыми доступными альфа версиями были OpenDivX alpha 47 и 48.
В прошлом поддержка для них была включена в <span class="application">MPlayer</span>
и собиралась по умолчанию. Также мы использовали их код постобработки
для факультативного улучшения качества изображения в MPEG1/2 фильмах.
Сейчас мы используем наш собственный фильтр для файлов всех типов.
</p><p>
Новое поколение этого кодека называется DivX4 и даже может декодировать фильмы,
сделанные пресловутым DivX кодеком! В дополнение к этому, он значительно
быстрее, чем Win32 DivX DLL'и, но медленнее, чем
<code class="systemitem">libavcodec</code>.
Поэтому, использовать его в качестве декодера
<span class="bold"><strong>НЕ РЕКОМЕНДУЕТСЯ</strong></span>. Хотя, он полезен
для кодирования. Единственным недостатком этого кодека является то, что он
не доступен по лицензии с Открытым исходным кодом[Open Source license]
</p><p>
DivX4 работает в двух режимах:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-vc odivx</tt></span></dt><dd>
  Использовать кодек в манере OpenDivX. В этом случае, он выдаёт YV12
  изображения в своём собственном буфере, и <span class="application">MPlayer</span>
  сам изменяет пространство цветов через libvo. (<span class="bold"><strong>Быстро,
  рекомендуется!</strong></span>)
  </dd><dt><span class="term"><tt class="option">-vc divx4</tt></span></dt><dd>
  Используется изменение пространства цветов в кодеке. В этом режиме Вы также
  можете использовать YUY2/UYVY. (<span class="bold"><strong>МЕДЛЕННО</strong></span>)
  </dd></dl></div><p>
</p><p>
Метод <tt class="option">-vc odivx</tt> обычно быстрее, поскольку при этом изображение
передаётся в YV12 формате (линейный YUV 4:2:0), и поэтому требуется много
меньшая пропускная способность шины. Для упакованных YUV режимов (YUY2, UYVY)
используйте метод <tt class="option">-vc divx4</tt>. В RGB режимах скорость - такая же,
различаясь в лучшем случае из-за текущей глубины цвета.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
Если Ваш <tt class="option">-vo</tt> драйвер поддерживает прямой вывод, то <tt class="option">-vc
divx4</tt> может быть более быстрым, или даже наибыстрейшим решением.
</p><p>
Двоичная библиотека DivX4/5 кодека может быть скачена с сайтов
<a href="http://avifile.sourceforge.net" target="_top">avifile</a> или
<a href="http://www.divx.com" target="_top">divx.com</a>
Распакуйте его, запустите как администратор <tt class="filename">./install.sh</tt>,
и не забудьте добавить 
<tt class="filename">/usr/local/lib</tt> в Ваш
<tt class="filename">/etc/ld.so.conf</tt> и запустить <span><strong class="command">ldconfig</strong></span>.
</p><p>
Так можно получить CVS версию СТАРОЙ библиотеки OpenDivX core:
</p><div class="procedure"><ol type="1"><li><p>
</p><pre class="screen">cvs -d:pserver:anonymous@cvs.projectmayo.com:/cvsroot login</pre><p>
</p></li><li><p>
</p><pre class="screen">cvs -d:pserver:anonymous@cvs.projectmayo.com:/cvsroot co divxcore</pre><p>
</p></li><li><p>
Основная библиотека разделена на decore[декодер] и encore[кодер] библиотеки,
которые должны компилироваться по-отдельности. Для библиотеки decore, просто наберите
</p><pre class="screen">
cd divxcore/decore/build/linux
make
cp libdivxdecore.so /usr/local/lib
ln -s libdivxdecore.so /usr/local/lib/libdivxdecore.so.0
cp ../../src/decore.h /usr/local/include
</pre><p>
</p></li><li><p>
К сожалению, для библиотеки encore Linux'ового Makefile нет, и MMX оптимизированный
код работает только под Windows. Вы всё же можете скомпилировать её, используя этот
<a href="ftp://ftp.mplayerhq.hu/MPlayer/contrib/divx-mf/Makefile" target="_top">Makefile</a>.
</p><pre class="screen">
cd ../../../encore/build
mkdir linux
cd linux
cp path/Makefile .
make
cp libdivxencore.so /usr/local/lib
ln -s libdivxencore.so /usr/local/lib/libdivxencore.so.0
cp ../../src/encore.h /usr/local/include
</pre><p>
</p></li></ol></div><p>
<span class="application">MPlayer</span> автоматически находит DivX4/DivX5 если они были
правильно установлен, просто компилируйте как обычно. Если он не находит этот
кодек, то Вы неправильно установили или сконфигурировали DivX4/DivX5.
</p></div><p>
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="ffmpeg"></a>5.2.1.2. FFmpeg/libavcodec</h4></div></div></div><p>
<a href="http://ffmpeg.sourceforge.net" target="_top">FFmpeg</a> содержит пакет кодеков
с <span class="bold"><strong>открытым исходным кодом</strong></span>, который способен
декодировать потоки, закодированные различными видео и  аудио кодеками.
Кроме того, этот пакет предоставляет потрясающие кодирующие возможности,
причём производительность выше, чем у Win32 кодеков или DivX.com DivX4/5
библиотеки!
</p><p>
Он содержит множество хороших кодеков, из которых наиболее важными являются
варианты MPEG4: DivX3, DivX4, DivX5, Windows Media Video 7/8 (WMV1/WMV2). Также весьма
интересен декодер WMA.
</p><p>
Наконец, последний кодеком, заслуживающий внимания &#8212; это
<span class="bold"><strong>Sorenson 3</strong></span>(SVQ3) кодек. Это первая реализация
этого кодека с полностью открытым исходным кодом. Она даже быстрее оригинала.
Используйте её, вместо двоичного кодека!
</p><p>
Полный список доступных кодеков доступен на странице FFmpeg.
Поддерживаемые <a href="http://www.ffmpeg.org/ffmpeg-doc.html#SEC19" target="_top">видео</a>
и <a href="http://www.ffmpeg.org/ffmpeg-doc.html#SEC20" target="_top">аудио</a> кодеки.
</p><p>
Если вы используете релиз <span class="application">MPlayer</span>'а, то у Вас в пакете
уже есть <code class="systemitem">libavcodec</code>,
просто компилируйте как обычно. Если Вы используете MPlayer
из CVS, Вы должны извлечь <code class="systemitem">libavcodec</code>
из CVS дерева FFmpeg, поскольку релизы FFmpeg очень редки. Как правило, CVS
достаточно стабилен и предоставляет больше возможностей. Чтобы это сделать:
</p><div class="procedure"><ol type="1"><li><p>
  </p><pre class="screen">cvs -d:pserver:anonymous@mplayerhq.hu:/cvsroot/ffmpeg login</pre><p>
  </p></li><li><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@mplayerhq.hu:/cvsroot/ffmpeg co ffmpeg</pre><p>
  </p></li><li><p>
  Переместите каталог <tt class="filename">libavcodec</tt> из исходного кода FFmpeg
  в корень <span class="application">MPlayer</span>'овского CVS дерева.
  Это должно выглядеть так:
  <tt class="filename">main/libavcodec</tt>
  </p><p>
  Символической ссылки <span class="bold"><strong>не</strong></span> достаточно, Вы должны
  скопировать/переместить его!
  </p></li><li><p>
  Если Вы хотите, чтобы <code class="systemitem">libavcodec</code>
  обновлялась каждый раз, когда Вы обновляете
  <span class="application">MPlayer</span>'овский CVS, добавьте такую строчку:
  <tt class="filename">main/CVS/Entries</tt>
  в файл </p><pre class="screen">D/libavcodec////</pre><p>
  </p></li><li><p>
  Скомпилируйте. <tt class="filename">configure</tt> должен определить проблемы до
  компиляции.
  </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
<span class="application">MPlayer</span> из CVS содержит подкаталог
<tt class="filename">libavcodec</tt>, но он <span class="bold"><strong>не</strong></span>
содержит исходный код для <code class="systemitem">libavcodec</code>!
Вы должны следовать указаниям,
приведённым выше, чтобы получить исходный код этой библиотеки.
</p></div><p>
С FFmpeg и моей Matrox G400, я даже могу смотреть DivX фильмы с высочайшим
разрешением без пропускаемых кадров на моем K6-2 500.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="xanim"></a>5.2.1.3. XAnim'овские кодеки</h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
Обратите внимание, что XAnim'овские бинарные кодеки распространяются с небольшим
текстом, утверждающим, что это лицензия и помимо прочих запретов, запрещающим
использование этих кодеков с любой программой кроме <span class="application">XAnim</span>'а.

Тем не менее, автор XAnim'а ещё должен ещё произвести юридические действия по
относящимся к кодекам вопросам.
</p></div><p><b>УСТАНОВКА И ИСПОЛЬЗОВАНИЕ. </b>
<span class="application">MPlayer</span> способе использовать XAnim'овские кодеки
для декодирования. Чтобы включить их, следуйте инструкциям:
</p><div class="procedure"><ol type="1"><li><p>
  Скачайте кодеки, которые Вы хотите использовать, с сайта
  <a href="http://xanim.va.pubnix.com" target="_top">XAnim site</a>.
  <span class="bold"><strong>3ivx</strong></span> кодека там нет, но его можно найти на
  <a href="http://www.3ivx.com" target="_top">сайте 3ivx</a>.
  </p></li><li><p>
  <span class="bold"><strong>ИЛИ</strong></span> скачайте пакет кодеков с нашей
  <a href="http://www.mplayerhq.hu/MPlayer/releases/codecs/" target="_top">страницы кодеков</a>
  </p></li><li><p>
  Используйте опцию <tt class="option">--with-xanimlibdir</tt>, чтобы сообщить
  <tt class="filename">configure</tt>, где находятся XAnim'овские кодеки.
  По умолчанию, он их ищет в
  <tt class="filename">/usr/local/lib/codecs</tt>,
  <tt class="filename">/usr/local/lib/xanim/mods</tt>,
  <tt class="filename">/usr/lib/xanim/mods</tt>и
  <tt class="filename">/usr/lib/xanim</tt>.
  Вместо этого, Вы можете установить значением переменной среды окружения
  <code class="envar">XANIM_MOD_DIR</code> каталог с XAnim'овскими кодеками.
  </p></li><li><p>
  Переименуйте/создайте символические ссылки, убрав части, относящиеся к
  архитектуре так, чтобы файлы назывались так: <tt class="filename">vid_cvid.xa</tt>,
  <tt class="filename">vid_h263.xa</tt>, <tt class="filename">vid_iv50.xa</tt>
  </p></li></ol></div><p>
XAnim - это семейство видео кодеков <code class="systemitem">xanim</code>, поэтому Вы
можете использовать опцию <tt class="option">-vfm xanim</tt>, чтобы заставить
<span class="application">MPlayer</span> использовать их, если возможно.
</p><p>
Тестированные кодеки это: <span class="bold"><strong>Indeo 3.2, 4.1, 5.0, CVID, 3ivX,
h263.</strong></span>
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="vivo-video"></a>5.2.1.4. VIVO видео</h4></div></div></div><p>
<span class="application">MPlayer</span> может проигрывать Vivo (1.0 and 2.0) фильмы.
Наиболее подходящий кодек для 1.0 файлов - это FFmpeg'овский H263 декодер, Вы
можете включить его использование опцией <tt class="option">-vc ffh263</tt>. Для 2.0
файлов используйте Win32 DLL (опция <tt class="option">-vc vivo</tt>). Если Вы не
укажете опцию в командной строке, <span class="application">MPlayer</span>
автоматически выберет лучший доступный кодек.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="mpeg12"></a>5.2.1.5. MPEG 1/2 видео</h4></div></div></div><p>
MPEG1 и MPEG2 декодируются многоплатформенной "родной" библиотекой <code class="systemitem">libmpeg2</code>, исходный код которой включён в
<span class="application">MPlayer</span>.  Мы обрабатываем плохое MPEG 1/2 видео,
перехватывая <code class="systemitem">Сигнал 11</code>
(<code class="systemitem">segmentation fault[ошибка сегментации]</code>), и быстро
реинициализируя кодек, продолжая точно с места ошибки. Такая технология
восстановления не имеет значимых временных задержек.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="avicodecs"></a>5.2.1.6. MS Video1, Cinepak CVID, и другие старые кодеки</h4></div></div></div><p>
MPlayer может воспроизводить большую часть старых кодеков, использовавшихся
в AVI и MOV файлах. Прежде они декодировались бинарными Win32 кодеками,
а теперь, используя 
<a href="codecs.html#ffmpeg" title="5.2.1.2. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>,
для большинства из них у нас есть <span class="bold"><strong>родные кодеки</strong></span>.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="realvideo"></a>5.2.1.7. RealVideo</h4></div></div></div><p>
<span class="application">MPlayer</span> поддерживает декодирование всех версий
RealVideo:

</p><div class="itemizedlist"><ul type="disc"><li>
  RealVideo 1.0, 2.0 (fourcc RV10, RV20) - (де)кодирование поддерживается, используя
  <code class="systemitem">libavcodec</code>
  </li><li>
  RealVideo 3.0, 4.0 (fourcc RV30, RV40) - декодирование
  поддерживается, используя <span class="bold"><strong>библиотеки RealPlayer'а</strong></span>
  </li></ul></div><p>
</p><p>
Cкачайте Real кодеки на
<a href="http://www.mplayerhq.hu/MPlayer/releases/codecs/" target="_top">http://www.mplayerhq.hu/MPlayer/releases/codecs/</a>
и распакуйте их в каталог
<tt class="filename">/usr/local/lib/codecs</tt>.
Если Вы хотите хранить их в другом месте, укажите <span><strong class="command">configure</strong></span>
опцию <tt class="option">--with-reallibdir</tt>.
</p><p>
На Mac OS X Вы должны убедиться, что <tt class="filename">pncrt.Shlb</tt> (включая его
resource fork!) находится в том же каталоге, что и Real кодеки. Скопируйте их,
например, так: 
</p><pre class="screen">ditto -rsrcFork "RealOne Player.app/Contents/MacOS/pncrt.Shlb" "RealOne Player.app/Contents/MacOS/Library/Codecs"</pre><p>
Если Вы этого не сделаете, или забудете скопировать resource fork, Вы будете
получать такие ошибки:
</p><pre class="screen">GetDiskFragment() failed with error -2804: &lt;&lt;Unknown disk fragment&gt;&gt;&lt;&lt;Unknown disk fragment&gt;&gt;&lt;pncrt.Shlb&gt;&lt;&gt;</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
<span class="application">RealPlayer</span>'овские библиотеки в настоящий момент
<span class="bold"><strong>работают только под Linux, FreeBSD, NetBSD и Cygwin
на x86, Alpha и PowerPC (тестировались Linux/Alpha и Linux/PowerPC)
платформах и с Mac OS X</strong></span>.
</p></div></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="xvid"></a>5.2.1.8. XviD</h4></div></div></div><p>
<a href="http://www.xvid.org" target="_top">XviD</a> - это разработка, отпочковавшаяся от
OpenDivX кодека. Это произошло, когда ProjectMayo сделал исходный код OpenDivX
закрытым (DivX4, теперь DivX5), и разработчики OpenDivX не из ProjectMayo
разозлились, и взялись за XviD. Поэтому у обоих проектов общие корни.

</p><div class="itemizedlist"><p class="title"><b>ПРЕИМУЩЕСТВА</b></p><ul type="disc"><li>
  открытый исходный код
  </li><li>
  API совместимы с DivX4, поэтому просто добавить для него поддержку
  </li><li>
  поддержка кодирования в 2 прохода
  </li><li>
  хорошее качество кодирования, более высокая скорость, по сравнению с DivX4
  (вы можете его оптимизировать под Вашу машину во время компиляции)
  </li></ul></div><p>

</p><div class="itemizedlist"><p class="title"><b>НЕДОСТАТКИ</b></p><ul type="disc"><li>
  в настоящий момент не все DivX/DivX4 файлы <span class="bold"><strong>декодируются
  </strong></span> (не проблема, поскольку их может воспроизвести
  <a href="codecs.html#ffmpeg" title="5.2.1.2. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>)
  </li><li>
  разработка продолжается и в настоящий момент
  </li></ul></div><p>
</p><div class="procedure"><a name="id2559691"></a><p class="title"><b>УСТАНОВКА XVID CVS</b></p><p>
  В настоящий момент он доступен только по CVS. Вот как его скачать и поставить
  (Вам потребуется autoconf не старее 2.50, automake и libtool):
</p><ol type="1"><li><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid login</pre><p>
  </p></li><li><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid co xvidcore</pre><p>
</p></li><li><p>
  </p><pre class="screen">cd xvidcore/build/generic</pre><p>
  </p></li><li><p>
  </p><pre class="screen">./bootstrap.sh</pre><p>
  </p></li><li><p>
  </p><pre class="screen">./configure</pre><p>
  Вам может потребоваться добавить некоторые опции (посмотрите вывод
  </p><pre class="screen">./configure --help</pre><p>).
  </p></li><li><p>
  </p><pre class="screen">make &amp;&amp; make install</pre><p>
  </p></li><li><p>
  Если Вы указали <tt class="option">--enable-divxcompat</tt>,
  скопируйте <tt class="filename">../../src/divx4.h</tt> в
  <tt class="filename">/usr/local/include/</tt>.
  </p></li><li><p>
  Перекомпилируйте <span class="application">MPlayer</span> с
  <tt class="option">--with-xvidlibdir=<em class="replaceable"><code>/path/to/</code></em>libxvidcore.a</tt>
  <tt class="option">--with-xvidincdir=<em class="replaceable"><code>/path/to/</code></em>xvid.h</tt>
  </p></li></ol></div></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="sorenson"></a>5.2.1.9. Sorenson</h4></div></div></div><p>
Sorenson - это видео кодек, разработанный в Sorenson Media и лицензированный
Apple, которые распространяют его с <span class="application">QuickTime Player</span>.
В настоящий момент мы способны декодировать все версии Sorenson видео файлов
следующими декодерами:
</p><div class="itemizedlist"><ul type="disc"><li>
  Sorenson 1 (fourcc <span class="emphasis"><em>SVQ1</em></span>) - декодирование поддерживается
  <span class="bold"><strong>родным кодеком</strong></span>
  (<a href="codecs.html#ffmpeg" title="5.2.1.2. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>)
  </li><li>
  Sorenson 3 (fourcc <span class="emphasis"><em>SVQ3</em></span>) - декодирование поддерживается,
  используя <span class="bold"><strong>"родной" кодек</strong></span>
  (<a href="codecs.html#ffmpeg" title="5.2.1.2. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>)
  </li></ul></div><div class="procedure"><a name="id2559948"></a><p class="title"><b>КОМПИЛЯЦИЯ MPLAYER'А С ПОДДЕРЖКОЙ БИБЛИОТЕК QUICKTIME</b></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>в настоящий момент поддерживаются только 32битные Intel'евские
платформы.</p></div><ol type="1"><li><p>скачайте <span class="application">MPlayer</span>'овский CVS</p></li><li><p>скачайте пакет QuickTime DLL с
<a href="http://www.mplayerhq.hu/MPlayer/releases/codecs/" target="_top">http://www.mplayerhq.hu/MPlayer/releases/codecs/</a>
</p></li><li><p>распакуйте пакет QuickTime DLL в Ваш каталог Win32 кодеков
(по умолчанию: <tt class="filename">/usr/local/lib/codecs</tt>)
</p></li><li><p>скомпилируйте <span class="application">MPlayer</span></p></li></ol></div></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="codec-x264"></a>5.2.1.10. x264</h4></div></div></div><div class="sect4" lang="ru"><div class="titlepage"><div><div><h5 class="title"><a name="codec-x264-whatis"></a>5.2.1.10.1. What is x264?</h5></div></div></div><p>
  <code class="systemitem">x264</code> is a library for
  creating H.264 video streams.
  It is not 100% complete, but currently it has at least some kind
  of support for most of the H.264 features which impact quality.
  There are also many advanced features in the H.264 specification
  which have nothing to do with video quality per se; many of these
  are not yet implemented in
  <code class="systemitem">x264</code>.
</p><div class="itemizedlist"><p class="title"><b>Encoder features</b></p><ul type="disc"><li><p>CAVLC/CABAC</p></li><li><p>Multi-references</p></li><li><p>Intra: all macroblock types (16x16 and 4x4 with
    all predictions)</p></li><li><p>Inter P: all partitions (from 16x16 down to
    4x4)</p></li><li><p>Inter B: partitions from 16x16 down to 8x8
    (including SKIP/DIRECT)</p></li><li><p>Ratecontrol: constant quantizer, constant bitrate,
    or multipass ABR</p></li><li><p>Scene cut detection</p></li><li><p>Adaptive B-frame placement</p></li><li><p>B-frames as references / arbitrary frame
    order</p></li></ul></div><div class="itemizedlist"><p class="title"><b>Encoder limitations</b></p><ul type="disc"><li><p>No real RD</p></li></ul></div></div><div class="sect4" lang="ru"><div class="titlepage"><div><div><h5 class="title"><a name="codec-h264-whatis"></a>5.2.1.10.2. What is H.264?</h5></div></div></div><p>
  H.264 is one name for a new digital video codec jointly developed
  by the ITU and MPEG.
  It can also be correctly referred to by the cumbersome names of
  "ISO/IEC 14496-10" or "MPEG-4 Part 10".
  More frequently, it is referred to as "MPEG-4 AVC" or just "AVC".
</p><p>
  Whatever you call it, H.264 may be worth trying because it can
  typically match the quality of MPEG-4 ASP with 5%-30% less
  bitrate.
  Actual results will depend on both the source material and the
  encoder.
  The gains from using H.264 do not come for free: decoding H.264
  streams seems to have steep CPU and memory requirements.
  For instance, on a 1733 MHz Athlon, a 1500kbps H.264 video uses
  around 50% CPU to decode.
  By comparison, decoding a 1500kbps MPEG4-ASP stream requires
  around 10% CPU.
  This means that decoding high-definition streams is almost out of
  the question for most users.
  It also means that even a decent DVD rip may sometimes stutter on
  processors slower than 2.0 GHz or so.
</p><p>
  At least with <code class="systemitem">x264</code>,
  encoding requirements are not much worse than what you are used to
  with MPEG4-ASP.
  For instance, on a 1733 MHz Athlon a typical DVD encode would run
  at 5-15fps.
</p><p>
  This document is not intended to explain the details of H.264,
  but if you are interested in a brief overview, you may want to read
  <a href="http://www.cdt.luth.se/~peppar/kurs/smd151/spie04-h264OverviewPaper.pdf" target="_top">The H.264/AVC Advanced Video Coding Standard: Overview and Introduction to the Fidelity Range Extensions</a>.
</p></div><div class="sect4" lang="ru"><div class="titlepage"><div><div><h5 class="title"><a name="codec-x264-playback"></a>5.2.1.10.3. How can I play H.264 videos with <span class="application">MPlayer</span>?</h5></div></div></div><p>
  <span class="application">MPlayer</span> uses
  <code class="systemitem">libavcodec</code>'s H.264
  decoder.
  <code class="systemitem">libavcodec</code> has had at
  least minimally usable H.264 decoding since around July 2004,
  however major changes and improvements have been implemented since
  that time, both in terms of more functionalities supported and in
  terms of improved CPU usage.
  Just to be certain, it is always a good idea to use a recent CVS
  checkout.
</p><p>
  If you want a quick and easy way to know whether there have been
  recent changes to <code class="systemitem">libavcodec</code>'s
  H.264 decoding, you might keep an eye on 
  <a href="http://mplayerhq.hu/cgi-bin/cvsweb.cgi/ffmpeg/libavcodec/h264.c?cvsroot=FFMpeg" target="_top">FFmpeg CVS repository's web interface</a>.
</p></div><div class="sect4" lang="ru"><div class="titlepage"><div><div><h5 class="title"><a name="codec-x264-encode"></a>5.2.1.10.4. How can I encode videos using <span class="application">MEncoder</span> and <code class="systemitem">x264</code>?</h5></div></div></div><p>
  If you have the subversion client installed, the latest x264
  sources can be gotten with this command:
  </p><pre class="screen">
    svn co svn://svn.videolan.org/x264/trunk x264
  </pre><p>
  <span class="application">MPlayer</span> sources are updated whenever
  an <code class="systemitem">x264</code> API change
  occurs, so it is always suggested to use CVS
  <span class="application">MPlayer</span> as well.
  Perhaps this situation will change when and if an
  <code class="systemitem">x264</code> "release" occurs.
  Meanwhile, <code class="systemitem">x264</code> should
  be considered very unstable, in the sense that its programming
  interface is subject to change.
</p><p>
  <code class="systemitem">x264</code> is built and
  installed in the standard way:
  </p><pre class="screen">
    ./configure &amp;&amp; make &amp;&amp; sudo make install
  </pre><p>
  This installs libx264.a in /usr/local/lib and x264.h is placed in
  /usr/local/include.

  With the <code class="systemitem">x264</code> library
  and header placed in the standard locations, building
  <span class="application">MPlayer</span> with
  <code class="systemitem">x264</code> support is easy.
  Just run the standard:
  </p><pre class="screen">./configure &amp;&amp; make &amp;&amp; sudo make install</pre><p>
  The configure script will autodetect that you have satisfied the
  requirements for <code class="systemitem">x264</code>.
</p></div></div></div><div class="sect2" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="audio-codecs"></a>5.2.2. Аудио кодеки</h3></div></div></div><div class="itemizedlist"><p class="title"><b>Наиболее важными аудио кодеками среди всех являются:</b></p><ul type="disc"><li>
  MPEG layer 1/2/3 (MP1/2/3) аудио (<span class="bold"><strong>"родной"</strong></span>
  код, с MMX/SSE/3DNow! оптимизацией)
  </li><li>
  Windows Media Audio 7 и 8 (aka WMAv1 и WMAv2) (<span class="bold"><strong>"родной"</strong></span> код, с
  <a href="codecs.html#ffmpeg" title="5.2.1.2. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>)
  </li><li>
  Windows Media Audio 9 (WMAv3) (используя DMO DLL)
  </li><li>
  AC3 Dolby аудио (<span class="bold"><strong>"родной"</strong></span> код, с
  MMX/SSE/3DNow! оптимизацией)
  </li><li>
  AC3 проходящий через звуковое оборудование
  </li><li>
  AAC
  </li><li>
  Ogg Vorbis аудио кодек (<span class="bold"><strong>родная</strong></span> библиотека)
  </li><li>
  RealAudio: DNET (AC3 с низким битпотоком), Cook, Sipro и ATRAC3
  </li><li>
  QuickTime: Qualcomm и QDesign аудио кодеки
  </li><li>
  VIVO аудио (g723, Vivo Siren)
  </li><li>
  Voxware аудио (используя DirectShow DLL)
  </li><li>
  alaw и ulaw, различные gsm, adpcm и pcm форматы и другие простые старые аудио
  кодеки
  </li></ul></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="swac3"></a>5.2.2.1. Программное декодирование AC3</h4></div></div></div><p>
Это декодер, используемый, по умолчанию, для файлов с AC3 аудио
</p><p>
Декодер AC3 может создавать аудио вывод микшированный для 2, 4 или 6 колонок.
Будучи сконфигурированным для 6 колонок, этот декодер предоставляет раздельный
вывод всех AC3 каналов звуковому драйверу, позволяя получить "звук вокруг"
без внешнего AC3 декодера, необходимого для использования hwac3 кодека.
</p><p>
Используйте опцию <tt class="option">-channels</tt>, чтобы выбрать количество каналов
при выводе. Используйте <tt class="option">-channels 2</tt> для микширования до стерео.
Для микширования до 4 каналов (выводы Left Front[Левый Передний], Right Front
[Правый передний], Left Surround[Левый Задний] и Right Surround[Правый Задний]),
используйте <tt class="option">-channels 4</tt>. В этом случае все центральные каналы
будут смикшированы до уровня передних каналов. <tt class="option">-channels 6</tt> будет
выводить все AC3 каналы так, как они закодированы - по порядку:
Left[Левый], Right[Правый], Left Surround[Левый Задний], Right Surround[Правый
Задний], Center[Центральный] и LFE.
</p><p>
Количество каналов по умолчанию - 2.
</p><p>
Чтобы использовать более 2 каналов, Вам нужно использовать OSS, и обладать
карточкой, поддерживающей необходимое количество каналов через ioctl
SNDCTL_DSP_CHANNELS.  Примером подходящего драйвера является emu10k1
(используется для Soundblaster Live! карточек) августа 2001'ого или новее
(ALSA CVS тоже должен работать).
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="hwac3"></a>5.2.2.2. Аппаратное декодирование AC3</h4></div></div></div><p>
Вам нужна AC3-совместимая карта с цифровым (S/PDIF) выводом. Драйвер карты
должен должным образом поддерживать AFMT_AC3 формат (например C-Media).
Подсоедините AC3 декодер к S/PDIF выводу и используйте опцию <tt class="option">-ac
hwac3</tt>. Это экспериментальная возможность, но известно, что это работает с
C-Media картами и Soundblaster Live! + ALSA (но не OSS) драйверами и
картами MPEG декодирования DXR3/Hollywood+.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="libmad"></a>5.2.2.3. Поддержка libmad</h4></div></div></div><p>
<a href="http://mad.sourceforge.net" target="_top">libmad</a> - это многоплатформенная,
целочисленная (внутренне 24'битный PCM)
библиотека декодирования MPEG аудио. Она не очень хорошо обрабатывает битые
файлы и иногда у неё бывают проблемы с перемещением по файлу.
</p><p>
Чтобы включить её поддержку, компилируйте с опцией configure
<tt class="option">--enable-mad</tt>.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="vivo-audio"></a>5.2.2.4. VIVO аудио</h4></div></div></div><p>
Аудио кодек, используемый в VIVI файлах зависит от того, это VIVI/1.0 или
VIVI/2.0 файл. В VIVO/1.0 файлах <span class="bold"><strong>g.723</strong></span> аудио,
а в VIVO/2.0 файлах - <span class="bold"><strong>Vivo Siren</strong></span> аудио. Оба
типа поддерживаются.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="realaudio"></a>5.2.2.5. RealAudio</h4></div></div></div><p>
<span class="application">MPlayer</span> поддерживает декодирование почти всех версий
RealAudio:
</p><div class="itemizedlist"><ul type="disc"><li>
  RealAudio DNET - декодирование поддерживается в
  <code class="systemitem">liba52</code>
  </li><li>
  RealAudio Cook/Sipro/ATRAC3 - декодирование поддерживается использованием
  <span class="bold"><strong>библиотек из RealPlayer'а</strong></span>
  </li></ul></div><p>
Инструкции по установке RealPlayer'овские библиотек находятся в секции
<a href="codecs.html#realvideo" title="5.2.1.7. RealVideo">RealVideo</a>.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="qdesign"></a>5.2.2.6. QDesign кодеки</h4></div></div></div><p>
Аудио потоки QDesign (fourcc:<span class="emphasis"><em>QDMC, QDM2</em></span>) обнаруживаются
в MOV/QT файлах. Обе версии этого кодека могут декодироваться библиотеками
QuickTime. Инструкции по установке см. в секции
<a href="codecs.html#sorenson" title="5.2.1.9. Sorenson">Sorenson video codec</a>.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="qualcomm"></a>5.2.2.7. Qualcomm кодеки</h4></div></div></div><p>
Аудио потоки Qualcomm (fourcc:<span class="emphasis"><em>Qclp</em></span>) обнаруживаются
в MOV/QT файлах. Они могут декодироваться библиотеками QuickTime.
Инструкций по установке см. в секции
<a href="codecs.html#sorenson" title="5.2.1.9. Sorenson">Sorenson video codec</a>.
</p></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="aac"></a>5.2.2.8. AAC кодек</h4></div></div></div><p>
AAC (Advanced Audio Coding) - это кодек, иногда обнаруживаемый в MOV и MP4
файлах. Декодер с открытым исходным кодом, называемый FAAD, доступен с
<a href="http://www.audiocoding.com" target="_top">http://www.audiocoding.com</a>.
<span class="application">MPlayer</span> включает в себя libfaad 2.0RC1, поэтому
Вам ничего не нужно дополнительно скачивать.
</p><p>
Если Вы используете gcc 3.2, который не может скомпилировать встроенный FAAD,
или просто хотите использовать внешнюю библиотеку, скачаете её с 
<a href="http://www.audiocoding.com/download.php" target="_top">страницы скачивания</a>
и укажите <tt class="filename">configure</tt> <tt class="option">--enable-external-faad</tt>.
Вам не нужен весь faad2, чтобы декодировать AAC файлы, достаточно libfaad.
Вот как Вы можете её собрать:
</p><pre class="screen">
cd faad2/
chmod +x bootstrap
./bootstrap
./configure
cd libfaad
make
make install
</pre><p>
Бинарии отсутствуют на audiocoding.com, но вы можете скачать (apt-get) Debian
пакеты с <a href="http://marillat.free.fr" target="_top">домашней страницы Christian Marillat</a>,
Mandrake RPM'ники с <a href="http://plf.zarb.org" target="_top">P.L.F</a> и RedHat RPM'ники
с <a href="http://greysector.rangers.eu.org/" target="_top">Grey Sector[Серый Сектор]</a>.
</p></div></div><div class="sect2" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="codec-importing"></a>5.2.3. КАК извлечь кодек из Win32</h3></div></div></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="vfw-codecs"></a>5.2.3.1. VFW кодеки</h4></div></div></div><p>
VFW (Video for Windows[Видео для Windows]) - это старые Видео API для Windows.
У этих кодеков расширения <tt class="filename">.DLL</tt> или (реже) <tt class="filename">.DRV
</tt>. Если <span class="application">MPlayer</span> не может проигрывать Ваш
AVI с такого рода сообщением:
</p><pre class="screen">UNKNOWN video codec: HFYU (0x55594648)</pre><p>
</p><p>
Это значит, что Ваш AVI закодирован кодеком с fourcc[кодом из 4 символов] HFYU
(HFYU = HuffYUV кодек, DIV3 = DivX Low Motion, и т. п.). Теперь, когда Вы это
знаете, Вы должны найти DLL, которую Windows загружает для проигрывания этого
файла. В нашем случае, в файле <tt class="filename">system.ini</tt> есть эта
информация, в этой строке:
</p><pre class="programlisting">VIDC.HFYU=huffyuv.dll</pre><p>
</p><p>
Значит, Вам нужен файл <tt class="filename">huffyuv.dll</tt>. Заметьте, что аудио
кодеки используют префикс MSACM:
</p><pre class="programlisting">msacm.l3acm=L3codeca.acm</pre><p>
</p><p>
Это MP3 кодек. Теперь у Вас есть  вся необходимая информация (fourcc, файл с
кодеком, пример AVI), представьте на рассмотрение запрос о поддержке Вашего
кодека по почте и загрузите эти файлы на FTP сайт:
<code class="systemitem">
ftp://ftp.mplayerhq.hu/MPlayer/incoming/[codecname]/
</code>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>Под Windows NT/2000/XP ищите эту информацию в реестре, например,
ищите "VIDC.HFYU". Чтобы узнать, как это делать, см. ниже старый
DirectShow метод.
</p></div></div><div class="sect3" lang="ru"><div class="titlepage"><div><div><h4 class="title"><a name="dshow-codecs"></a>5.2.3.2. DirectShow кодеки</h4></div></div></div><p>
DirectShow - это более новый Video API, которые даже хуже, чем его предшественник.
Все сложнее с DirectShow, поскольку
</p><div class="itemizedlist"><ul type="disc"><li>
  <tt class="filename">system.ini</tt> не содержит необходимую информацию, вместо
  этого она хранится в реестре и 
  </li><li>
  нам нужен GUID этого кодека.
  </li></ul></div><p>
</p><div class="procedure"><a name="id2561186"></a><p class="title"><b>Новый Метод:</b></p><p>
Используя <span class="application">Microsoft GraphEdit</span> (быстро)
</p><ol type="1"><li><p>
  Получите <span class="application">GraphEdit</span> или из DirectX SDK или
  <a href="http://doom9.net" target="_top">doom9</a>
  </p></li><li><p>
  Запустите <span><strong class="command">graphedit.exe</strong></span>.
  </p></li><li><p>
  В меню выберите Graph -&gt; Insert Filters.
  </p></li><li><p>
  Щёлкните <code class="systemitem">DirectShow Filters</code>
  </p></li><li><p>
  Выберите нужное имя кодека и щёлкните по нему.
  </p></li><li><p>
  В поле <code class="systemitem">DisplayName</code> обратите внимание на текст в
  фигурных скобках после обратного слэша и выпишете их (пять разделённых
  дефисами блоков, GUID).
  </p></li><li><p>
  Бинарный файл кодека - это файл, указанный в поле <code class="systemitem">Filename</code>.
  </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
Если там нет <code class="systemitem">Filename</code> и
<code class="systemitem">DisplayName</code> содержит что-то в духе 
<code class="systemitem">device:dmo</code>, то это - DMO-Кодек.
</p></div><div class="procedure"><a name="id2561333"></a><p class="title"><b>Старый метод:</b></p><p>
Сделайте глубокий вдох и начните искать в регистре...
</p><ol type="1"><li><p>
  Запустите <span><strong class="command">regedit</strong></span>.
  </p></li><li><p>
  Нажмите <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>F</b></span>, отключите первые две галочки
  и включите третью. Наберите fourcc Вашего кодека (например, 
  <strong class="userinput"><code>TM20</code></strong>).
  </p></li><li><p>
  Вы должны увидеть поле, содержащее путь и имя файла (например,
  <tt class="filename">C:\WINDOWS\SYSTEM\TM20DEC.AX</tt>).
  </p></li><li><p>
  Теперь, когда у Вас есть файл, нам нужен GUID. Попробуйте поискать снова,
  но теперь ищите имя кодека, а не fourcc. Это имя может быть получено,
  когда Media Player проигрывает файл, проверив
  <span class="guimenu">File</span> -&gt; <span class="guisubmenu">Properties</span> -&gt;
  <span class="guimenuitem">Advanced</span>.
  Если нет, Вам не повезло. Попробуйте угадать (например, ищите TrueMotion).
  </p></li><li><p>
  Если GUID найден, Вы должны видеть поля <span class="guilabel">FriendlyName</span>
  и <span class="guilabel">CLSID</span>. Выпишите 16-ти байтовый CLSID, это GUID, который
  нам нужен.
  </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
Если поиск не удаётся, попробуйте включить все галочки. Вы можете получить
ложные значения, но Вам может повести...
</p></div><p>
Теперь у Вас есть  вся необходимая информация (fourcc, GUID, файл с кодеком,
пример AVI), представьте на рассмотрение запрос о поддержке Вашего кодека по
почте и загрузите эти файлы на FTP сайт:
<code class="systemitem">ftp://ftp.mplayerhq.hu/MPlayer/incoming/[codecname]/
</code>
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="formats.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="features.html">Уровень выше</a></td><td width="40%" align="right"> <a accesskey="n" href="tv-input.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">5.1. Поддерживаемые форматы </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 5.3. TV вход</td></tr></table></div></body></html>
