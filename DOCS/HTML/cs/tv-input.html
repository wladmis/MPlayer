<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>10.1. TV vstup</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - Multimediální p&#345;ehráva&#269;"><link rel="up" href="tv.html" title="Kapitola 10. TV"><link rel="prev" href="tv.html" title="Kapitola 10. TV"><link rel="next" href="radio.html" title="Kapitola 11. Rádio"><link rel="preface" href="howtoread.html" title="Jak &#269;íst tuto  dokumentaci"><link rel="chapter" href="intro.html" title="Kapitola 1. P&#345;edstavení"><link rel="chapter" href="install.html" title="Kapitola 2. Instalace"><link rel="chapter" href="usage.html" title="Kapitola 3. Pou&#382;ití"><link rel="chapter" href="cd-dvd.html" title="Kapitola 4. Pou&#382;ití CD/DVD"><link rel="chapter" href="faq.html" title="Kapitola 5. &#268;asto Kladené Dotazy (FAQ)"><link rel="chapter" href="containers.html" title="Kapitola 6. Nosné formáty (Containers)"><link rel="chapter" href="codecs.html" title="Kapitola 7. Kodeky"><link rel="chapter" href="video.html" title="Kapitola 8. Výstupní video za&#345;ízení/rozhraní"><link rel="chapter" href="audio.html" title="Kapitola 9. Výstupní zvuková za&#345;ízení"><link rel="chapter" href="tv.html" title="Kapitola 10. TV"><link rel="chapter" href="radio.html" title="Kapitola 11. Rádio"><link rel="chapter" href="ports.html" title="Kapitola 12. Porty"><link rel="chapter" href="mencoder.html" title="Kapitola 13. Základní pou&#382;ití MEncoderu"><link rel="chapter" href="encoding-guide.html" title="Kapitola 14. Enkódování s MEncoderem"><link rel="appendix" href="bugreports.html" title="P&#345;íloha A. Jak hlásit chyby"><link rel="appendix" href="bugs.html" title="P&#345;íloha B. Známé chyby"><link rel="appendix" href="skin.html" title="P&#345;íloha C. Formát skin&#367; MPlayeru"><link rel="subsection" href="tv-input.html#tv-compilation" title="10.1.1. Kompilace"><link rel="subsection" href="tv-input.html#tv-tips" title="10.1.2. Tipy pro pou&#382;ívání"><link rel="subsection" href="tv-input.html#tv-examples" title="10.1.3. P&#345;íklady"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.1. TV vstup</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tv.html">P&#345;edcházející</a> </td><th width="60%" align="center">Kapitola 10. TV</th><td width="20%" align="right"> <a accesskey="n" href="radio.html">Dal&#353;í</a></td></tr></table><hr></div><div class="sect1" lang="cs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-input"></a>10.1. TV vstup</h2></div></div></div><p>
Tato sekce je zam&#283;&#345;ena na zp&#345;ístupn&#283;ní
<span class="bold"><strong>sledování/grabování z V4L kompatibilního TV tuneru
</strong></span>. Popis voleb k TV a ovládání z klávesnice naleznete v man
stránce.
</p><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="tv-compilation"></a>10.1.1. Kompilace</h3></div></div></div><div class="procedure"><ol type="1"><li><p>
  Zaprvé musíte rekompilovat. <tt class="filename">./configure</tt> zdetekuje
  v4l hlavi&#269;kové soubory kernelu a existenci za&#345;ízení
  <tt class="filename">/dev/video*</tt>. Pokud existují, bude zabudována
  podpora pro TV (viz výstup z <tt class="filename">./configure</tt>).
  </p></li><li><p>
  Ujist&#283;te se, &#382;e vá&#353; tuner pracuje s jiným Linuxovým TV softwarem,
  nap&#345;íklad <span class="application">XawTV</span>.
  </p></li></ol></div></div><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="tv-tips"></a>10.1.2. Tipy pro pou&#382;ívání</h3></div></div></div><p>
Úplný seznam voleb je dostupný v manuálové stránce.
Zde je jen n&#283;kolik typ&#367;:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Pou&#382;ijte volbu <tt class="option">channels</tt>. P&#345;íklad:
</p><pre class="screen">-tv channels=26-MTV1,23-TV2</pre><p>
Vysv&#283;tlení: pou&#382;ití této volby, pou&#382;itelné budou pouze kanály 26 a 23 a
bude zde rovn&#283;&#382; krásný OSD text po p&#345;epnutí kanál&#367;, zobrazující jméno
kanálu. Mezery ve jmén&#283; kanálu musí být nahrazeny znakem
"_".
</p></li><li><p>
Zvolte rozumné rozm&#283;ry obrazu. Rozm&#283;ry výsledného obrazu by m&#283;ly být
bezezbytku d&#283;litelné 16.
</p></li><li><p>
Pokud zachytáváte video se svislým rozli&#353;ením vy&#353;&#353;ím ne&#382; polovina plného
rozli&#353;ení (&#269;ili 288 pro PAL nebo 240 pro NTSC), pak 'snímky', které dostanete,
budou ve skute&#269;nosti prokládané páry p&#367;lsnímk&#367;.
V závislosti na tom, co chcete s videem d&#283;lat, je m&#367;&#382;ete nechat jak jsou,
destruktivn&#283; odstranit proklad, nebo rozd&#283;lit páry do individuálních polí&#269;ek.
</p><p>
Jinak bude získaný snímek rozt&#345;epený
b&#283;hem rychlých scén a regulátor datového toku nebude pravd&#283;podobn&#283; schopen
ani udr&#382;et nastavený datový tok, vzhledem k tomu, &#382;e prokladové artefakty
produkují velké mno&#382;ství detail&#367;, co&#382; spot&#345;ebovává velké p&#345;enosové pásmo.
Odstra&#328;ování prokladu m&#367;&#382;ete zapnout pomocí volby
<tt class="option">-vf pp=DEINT_TYPE</tt>. Dobrou práci obvykle odvede
<tt class="option">pp=lb</tt>, ale zále&#382;í na osobních preferencích. Prostudujte si
ostatní mo&#382;nosti odstra&#328;ování prokladu v manuálu a vyzkou&#353;ejte je.
</p></li><li><p>
Odst&#345;ihn&#283;te mrtvý prostor. Kdy&#382; zachytáváte video, oblasti na okrajích jsou
obvykle &#269;erné, nebo obsahují n&#283;jaký &#353;um. Co&#382; op&#283;t zbyte&#269;n&#283; spot&#345;ebovává
p&#345;enosové pásmo. P&#345;esn&#283;ji to nejsou samotné &#269;erné oblasti, ale ostrý p&#345;echod
mezi &#269;ernou a sv&#283;tlej&#353;ím videem, ale to te&#271; není d&#367;le&#382;ité.
Ne&#382; za&#269;nete zachytávat, nastavte parametry volby <tt class="option">crop</tt> tak,
aby byl ve&#353;kerý binec na okrajích odst&#345;i&#382;en. Op&#283;t se sna&#382;te zachovat rozumné
rozm&#283;ry výsledného obrazu.
</p></li><li><p>
Sledujte zatí&#382;ení CPU. V&#283;t&#353;inu &#269;asu by nem&#283;lo p&#345;ekro&#269;it hranici 90%. Pokud
máte velkou vyrovnávací pam&#283;&#357; pro zachytávání, doká&#382;e
<span class="application">MEncoder</span> p&#345;e&#382;ít n&#283;kolikasekundové p&#345;etí&#382;ení, ale
nic víc. Rad&#283;ji vypn&#283;te 3D OpenGL spo&#345;i&#269;e obrazovky a podobné v&#283;ci.
</p></li><li><p>
Nehrajte si se systémovými hodinami. <span class="application">MEncoder</span>
pou&#382;ívá systémové hodiny pro A/V synchronizaci. Pokud p&#345;estavíte systémové
hodiny (zvlá&#353;&#357; nazp&#283;t), <span class="application">MEncoder</span> bude zmaten a
vy p&#345;ijdete o snímky. To je velmi d&#367;le&#382;ité pokud jste p&#345;ipojeni k síti a
pou&#382;íváte n&#283;jaký &#269;asový synchroniza&#269;ní software jako je NTP. Musíte vypnout
NTP b&#283;hem zachytávání, pokud chcete spolehliv&#283; zachytávat.
</p></li><li><p>
Nem&#283;&#328;te <tt class="option">outfmt</tt> pokud nevíte co d&#283;láte, nebo va&#353;e
karta/ovlada&#269; opravdu nepodporuje výchozí (YV12 barevný prostor).
Ve star&#353;í verzi <span class="application">MPlayer</span>u/
<span class="application">MEncoder</span>u bylo nutné nastavit výstupní formát.
Tento problém by m&#283;l být v sou&#269;asných verzích vy&#345;e&#353;en,
<tt class="option">outfmt</tt> ji&#382; není nadále pot&#345;eba a výchozí hodnoty vyhovují
pro v&#283;t&#353;inu p&#345;ípad&#367;. Nap&#345;íklad pokud zachytáváte do DivX pomocí
<code class="systemitem">libavcodec</code>u a uvedete
<tt class="option">outfmt=RGB24</tt> pro zvý&#353;ení kvality zachytávaných snímk&#367;,
stejn&#283; budou tyto snímky pozd&#283;ji konvertovány zp&#283;t na YV12, tak&#382;e jediné co
tím získáte je spousta vyplýtvaného výkonu CPU.
</p></li><li><p>
Chcete-li nastavit barevný prostor I420 (<tt class="option">outfmt=i420</tt>),
musíte p&#345;idat i volbu <tt class="option">-vc rawi420</tt> kv&#367;li konfliktu fourcc
Intel Indeo video kodekem.
</p></li><li><p>
Existuje n&#283;kolik cest, jak zachytávat zvuk. M&#367;&#382;ete nahrát zvuk bu&#271; pomocí
zvukové karty pomocí externího propojení mezi video kartou a linkovým
vstupem, nebo pou&#382;itím vestav&#283;ného ADC v &#269;ipu bt878. Ve druhém p&#345;ípad&#283;
musíte na&#269;íst ovlada&#269; <span class="bold"><strong>btaudio</strong></span>. P&#345;e&#269;t&#283;te si
soubor <tt class="filename">linux/Documentation/sound/btaudio</tt> (ve zdrojácích
kernelu, nikoli <span class="application">MPlayer</span>u) pro n&#283;kolik instrukcí
jak pou&#382;ít tento ovlada&#269;.
</p></li><li><p>
Pokud <span class="application">MEncoder</span> nedoká&#382;e otev&#345;ít audio za&#345;ízení,
ujist&#283;te se, &#382;e je opravdu k dispozici. M&#367;&#382;ete mít potí&#382;e se zvukovými
servery jako aRts (KDE) nebo ESD (GNOME). Pokud máte pln&#283; duplexní zvukovou
kartu (tém&#283;&#345; ka&#382;dá slu&#353;ná karta to ji&#382; podporuje) a pou&#382;íváte KDE, zkuste
za&#353;krtnout volbu "full duplex" v menu nastavení zvukového serveru.
</p></li></ul></div></div><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="tv-examples"></a>10.1.3. P&#345;íklady</h3></div></div></div><div class="informalexample"><p>
Modelový výstup do AAlib :)
</p><pre class="screen">
mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://</pre><p>
</p></div><div class="informalexample"><p>
Vstup ze standardního V4L:
</p><pre class="screen">
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://</pre><p>
</p></div><div class="informalexample"><p>
Mnohem sofistikovan&#283;j&#353;í p&#345;íklad. Zde <span class="application">MEncoder</span>
zachytává obraz v plném PALu, o&#345;ízne okraje a odstraní proklad obrazu pomocí
lineárního sm&#283;&#353;ovacího algoritmu. Zvuk je komprimován konstantním datovým
tokem 64kbps LAME kodekem. Toto nastavení je vhodné pro zachytávání film&#367;.
</p><pre class="screen">
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
     -oac mp3lame -lameopts cbr:br=64 \
     -vf crop=720:544:24:16,pp=lb -o <em class="replaceable"><code>výstupní.avi</code></em> tv://
</pre><p>
</p></div><div class="informalexample"><p>
Toto navíc p&#345;e&#353;káluje video na 384x288 a zkomprimuje jej s datovým tokem
350kbps v re&#382;imu vysoké kvality. Volba vqmax uvol&#328;uje kvantizer a umo&#382;ní
video kompresoru podr&#382;et takto nízký datový tok i za cenu sní&#382;ení kvality.
To lze pou&#382;ít pro záznam dlouhých TV seriál&#367;, kde kvalita obrazu není a&#382;
tolik d&#367;le&#382;itá.
</p><pre class="screen">
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
     -oac mp3lame -lameopts cbr:br=48 \
     -vf crop=720:540:24:18,pp=lb,scale=384:288 -sws 1 -o <em class="replaceable"><code>výstupní.avi</code></em> tv://
</pre><p>
Rovn&#283;&#382; m&#367;&#382;ete nastavit men&#353;í rozm&#283;ry obrazu ve volb&#283; <tt class="option">-tv</tt>
a vyhnout se tak softwarovému &#353;kálování, ale tento p&#345;ístup vy&#382;aduje
maximální mno&#382;ství informací a je trochu odoln&#283;j&#353;í proti &#353;umu. &#268;ipy bt8x8
umí pr&#367;m&#283;rování pixel&#367; pouze ve svislém sm&#283;ru díky hardwarovým omezením.
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tv.html">P&#345;edcházející</a> </td><td width="20%" align="center"><a accesskey="u" href="tv.html">Nahoru</a></td><td width="40%" align="right"> <a accesskey="n" href="radio.html">Dal&#353;í</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitola 10. TV </td><td width="20%" align="center"><a accesskey="h" href="index.html">Dom&#367;</a></td><td width="40%" align="right" valign="top"> Kapitola 11. Rádio</td></tr></table></div></body></html>
