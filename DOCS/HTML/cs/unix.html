<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>12.3. Komer&#269;ní Unix</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - Multimediální p&#345;ehráva&#269;"><link rel="up" href="ports.html" title="Kapitola 12. Porty"><link rel="prev" href="bsd.html" title="12.2. *BSD"><link rel="next" href="windows.html" title="12.4. Windows"><link rel="preface" href="howtoread.html" title="Jak &#269;íst tuto  dokumentaci"><link rel="chapter" href="intro.html" title="Kapitola 1. P&#345;edstavení"><link rel="chapter" href="install.html" title="Kapitola 2. Instalace"><link rel="chapter" href="usage.html" title="Kapitola 3. Pou&#382;ití"><link rel="chapter" href="cd-dvd.html" title="Kapitola 4. Pou&#382;ití CD/DVD"><link rel="chapter" href="faq.html" title="Kapitola 5. &#268;asto Kladené Dotazy (FAQ)"><link rel="chapter" href="containers.html" title="Kapitola 6. Nosné formáty (Containers)"><link rel="chapter" href="codecs.html" title="Kapitola 7. Kodeky"><link rel="chapter" href="video.html" title="Kapitola 8. Výstupní video za&#345;ízení/rozhraní"><link rel="chapter" href="audio.html" title="Kapitola 9. Výstupní zvuková za&#345;ízení"><link rel="chapter" href="tv.html" title="Kapitola 10. TV"><link rel="chapter" href="radio.html" title="Kapitola 11. Rádio"><link rel="chapter" href="ports.html" title="Kapitola 12. Porty"><link rel="chapter" href="mencoder.html" title="Kapitola 13. Základní pou&#382;ití MEncoderu"><link rel="chapter" href="encoding-guide.html" title="Kapitola 14. Enkódování s MEncoderem"><link rel="appendix" href="bugreports.html" title="P&#345;íloha A. Jak hlásit chyby"><link rel="appendix" href="bugs.html" title="P&#345;íloha B. Známé chyby"><link rel="appendix" href="skin.html" title="P&#345;íloha C. Formát skin&#367; MPlayeru"><link rel="subsection" href="unix.html#solaris" title="12.3.1. Solaris"><link rel="subsection" href="unix.html#irix" title="12.3.2. IRIX"><link rel="subsection" href="unix.html#hp-ux" title="12.3.3. HP-UX"><link rel="subsection" href="unix.html#aix" title="12.3.4. AIX"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.3. Komer&#269;ní Unix</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bsd.html">P&#345;edcházející</a> </td><th width="60%" align="center">Kapitola 12. Porty</th><td width="20%" align="right"> <a accesskey="n" href="windows.html">Dal&#353;í</a></td></tr></table><hr></div><div class="sect1" lang="cs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix"></a>12.3. Komer&#269;ní Unix</h2></div></div></div><p>
<span class="application">MPlayer</span> byl portován na mnoho komer&#269;ních variant
Unixu. Jeliko&#382; vývojová prost&#345;edí na t&#283;chto systémech bývají odli&#353;ná od t&#283;ch
na svobodných Unixech, budete muset provést ru&#269;ní úpravy, aby se kompilace
povedla.
</p><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>12.3.1. Solaris</h3></div></div></div><p>
<span class="application">MPlayer</span> by m&#283;l b&#283;&#382;et na Solarisu 2.6 nebo nov&#283;j&#353;ím.
Pou&#382;ijte SUN audio rozhraní pomocí volby <tt class="option">-ao sun</tt> pro p&#345;ehrávání
zvuku.
</p><p>
Na <span class="bold"><strong>UltraSPARC</strong></span>ích, <span class="application">MPlayer</span>
vyu&#382;ívá jejich roz&#353;í&#345;ení <span class="bold"><strong>VIS</strong></span>
(ekvivalentní MMX), zatím jen v
<code class="systemitem">libmpeg2</code>,
<code class="systemitem">libvo</code>
a <code class="systemitem">libavcodec</code>, ale nikoli v
<code class="systemitem">mp3lib</code>. M&#367;&#382;ete p&#345;ehrávat VOB soubor
na 400MHz CPU. Budete k tomu pot&#345;ebovat nainstalovanou
<a href="http://www.sun.com/sparc/vis/mediaLib.html" target="_top"><code class="systemitem">mLib</code></a>.
</p><p><span class="bold"><strong>Caveat:</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p>Podpora <span class="bold"><strong>mediaLib</strong></span> je
<span class="bold"><strong>v sou&#269;asnosti vypnutá</strong></span> ve výchozím nastavení
<span class="application">MPlayer</span>u kv&#367;li chybovosti. U&#382;ivatelé SPARCu
p&#345;ekládající MPlayer s podporou mediaLib hlásili tlustý zelený pruh
v enkódovaném videu dekódovaném libavcodecem. Pokud chcete, m&#367;&#382;ete si ji
zapnout:
</p><pre class="screen">
$ ./configure --enable-mlib
</pre><p>
D&#283;láte to na vlastní nebezpe&#269;í. U&#382;ivatelé x86 by
<span class="bold"><strong>nikdy</strong></span> nem&#283;li pou&#382;ívat mediaLib, jeliko&#382;
vede k velmi slabému výkonu MPlayeru.
</p></li></ul></div><p>
Pro kompilaci balíku budete pot&#345;ebovat GNU <span class="application">make</span>
(<tt class="filename">gmake</tt>, <tt class="filename">/opt/sfw/gmake</tt>), jeliko&#382;
nativní make Solarisu nebude pracovat. Typickou chybou kompilace s make
Solarisu namísto GNU make je:
</p><pre class="screen">
   % /usr/ccs/bin/make
   make: Fatal error in reader: Makefile, line 25: Unexpected end of line seen
</pre><p>
</p><p>
Na Solarisu SPARC, pot&#345;ebujete GNU C/C++ Compiler; nezále&#382;í na tom, zda je
GNU C/C++ compiler konfigurován s nebo bez GNU assembleru.
</p><p>
Na Solarisu x86, pot&#345;ebujete GNU assembler a GNU C/C++ compiler,
konfigurovaný pro pou&#382;ití GNU assembleru! Kód <span class="application">MPlayer</span>u
na platform&#283; x86 intenzivn&#283; pou&#382;ívá MMX, SSE a 3DNOW! instrukce,
které nem&#367;&#382;e být kompilovány Sun assemblerem <tt class="filename">/usr/ccs/bin/as</tt>.
</p><p>
Skript <tt class="filename">configure</tt> zkou&#353;í zjistit, který assembler je pou&#382;itý
va&#353;ím p&#345;íkazem "gcc" (v p&#345;ípad&#283; &#382;e autodetekce sel&#382;e, pou&#382;ijte volbu
<tt class="option">--as=<em class="replaceable"><code>/kdekoli/máte/nainstalován/gnu-as</code></em></tt>
pro nastavení <tt class="filename">configure</tt> skriptu tak, aby na&#353;el GNU
"as" na va&#353;em systému).
</p><p>&#344;e&#353;ení b&#283;&#382;ných potí&#382;í:</p><div class="itemizedlist"><ul type="disc"><li><p>
Chybová zpráva z <tt class="filename">configure</tt> na systému Solaris x86
s pou&#382;itím GCC bez GNU assembleru:
</p><pre class="screen">
   % configure
   ...
   Checking assembler (/usr/ccs/bin/as) ... , failed
   Please upgrade(downgrade) binutils to 2.10.1...
</pre><p>
(&#344;e&#353;ení: Nainstalujte a pou&#382;ijte gcc konfigurovaný s <tt class="option">--with-as=gas</tt>)
</p><p>
Typická chyba, kterou dostanete p&#345;i kompilaci pomocí GNU C kompilátoru, který
nepou&#382;ívá GNU as:
</p><pre class="screen">
   % gmake
   ...
   gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
        -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
   Assembler: mplayer.c
   "(stdin)", line 3567 : Illegal mnemonic
   "(stdin)", line 3567 : Syntax error
   ... more "Illegal mnemonic" and "Syntax error" errors ...
</pre><p>
</p></li><li><p><span class="application">MPlayer</span> m&#367;&#382;e zhavarovat (segfault),
pokud dekódujete nebo enkódujete video pou&#382;ívající win32 kodeky:
</p><pre class="screen">
...
Trying to force audio codec driver family acm...
Opening audio decoder: [acm] Win32/ACM decoders
sysi86(SI86DSCR): Invalid argument
Couldn't install fs segment, expect segfault


MPlayer interrupted by signal 11 in module: init_audio_codec
...
</pre><p>
To díky zm&#283;n&#283; na sysi86() ve verzích Solaris 10 a p&#345;ed-Solaris
Nevada b31. V Solaris Nevada b32 to bylo opraveno;
Sun v&#353;ak je&#353;t&#283; musí portovat opravu do Solaris 10. MPlayer
Project upozornil Sun na tento problém a záplata pro Solaris 10
je v sou&#269;asnosti rozpracována. Více informací o této chyb&#283; naleznete
na:
<a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413" target="_top">http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413</a>.
</p></li><li><p>
Díky chybám v Solarisu 8, nem&#367;&#382;ete p&#345;ehrávat DVD disky v&#283;t&#353;í ne&#382; 4 GB:
</p><div class="itemizedlist"><ul type="circle"><li><p>
Ovlada&#269; sd(7D) na Solarisu 8 x86 má chybu v p&#345;ístupu k diskovému bloku &gt;4GB
na za&#345;ízeních, které mají logical blocksize != DEV_BSIZE (&#269;ili CD-ROM a DVD média).
Díky 32Bit int overflow, dostanete p&#345;ístupovou diskovou adresu modulo 4GB
(<a href="http://groups.yahoo.com/group/solarisonintel/message/22516" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22516</a>).
Tento problém neexistuje ve SPARC verzi Solarisu 8.
</p></li><li><p>
Podobná chyba je i v kódu systému soubor&#367; hsfs(7FS) (AKA ISO9660),
hsfs nemusí podporovat oddíly/disky v&#283;t&#353;í ne&#382; 4GB, ke v&#353;em dat&#367;m je p&#345;istupováno
modulo 4GB
(<a href="http://groups.yahoo.com/group/solarisonintel/message/22592" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22592</a>).
Problém hsfs m&#367;&#382;e být odstran&#283;n nainstalováním patche 109764-04 (sparc) / 109765-04 (x86).
</p></li></ul></div></li></ul></div></div><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="irix"></a>12.3.2. IRIX</h3></div></div></div><p>
M&#367;&#382;ete bu&#271; zkusit nainstalovat program GNU install a (pokud jste si ho
nedali do globální cesty) odkázat na jeho umíst&#283;ní pomocí:
</p><pre class="screen">./configure --with-install=<em class="replaceable"><code>/cesta/a/název/programu/install</code></em></pre><p>
</p><p>
nebo m&#367;&#382;ete pou&#382;ít výchozí install dodávaný s IRIXem 6.5. V tom p&#345;ípad&#283;
budete muset ru&#269;n&#283; upravit <tt class="filename">Makefile</tt>.
Zm&#283;&#328;te následující dva &#345;ádky:
</p><pre class="programlisting">
  $(INSTALL) -c -m 644 DOCS/mplayer.1 $(MANDIR)/man1/mplayer.1

  $(INSTALL) -c -m 644 etc/codecs.conf $(CONFDIR)/codecs.conf
</pre><p>
na:
</p><pre class="programlisting">
  $(INSTALL) -m 644 mplayer.1 $(MANDIR)/man1/

  $(INSTALL) -m 644 codecs.conf $(CONFDIR)/
</pre><p>
Pak spus&#357;te (z adresá&#345;e se zdrojovými kódy <span class="application">MPlayer</span>u):
</p><pre class="screen">cp DOCS/mplayer.1 . ; cp etc/codecs.conf .</pre><p>
a pokra&#269;ujte kompilací a instalací.
</p></div><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="hp-ux"></a>12.3.3. HP-UX</h3></div></div></div><p>
Joe Page hostuje podrobné HP-UX <span class="application">MPlayer</span>
<a href="http://users.rcn.com/joepage/mplayer_on_hpux11.htm" target="_top">HOWTO</a>
od Martina Ganssera na jeho domácí stránce. Podle t&#283;chto instrukcí by kompilace
m&#283;la prob&#283;hnout bez potí&#382;í. Následující informace jsou vyta&#382;eny ze zmín&#283;ného
HOWTO.
</p><p>
Pot&#345;ebujete GCC 3.4.0 nebo pozd&#283;j&#353;í, GNU make 3.80 nebo pozd&#283;j&#353;í a SDL 1.2.7 nebo pozd&#283;j&#353;í.
HP cc nevytvo&#345;í funk&#269;ní program, p&#345;edchozí verze GCC jsou chybové.
Pro funkci OpenGL musíte nainstalovat Mesa a video rozhraní gl a gl2 by m&#283;ly
pracovat. Jejich rychlost v&#353;ak m&#367;&#382;e být velmi malá, podle rychlosti CPU.
Dobrou náhradou za spí&#353;e slabý nativní HP-UX systém je GNU esound.
</p><p>
Vytvo&#345;te DVD za&#345;ízení pr&#367;zkumem SCSI pomocí:
</p><pre class="screen">
# ioscan -fn

Class          I            H/W   Path          Driver    S/W State    H/W Type        Description
...
ext_bus 1    8/16/5      c720  CLAIMED INTERFACE  Built-in SCSI
target  3    8/16/5.2    tgt   CLAIMED DEVICE
disk    4    8/16/5.<span class="bold"><strong>2</strong></span>.<span class="bold"><strong>0</strong></span>  sdisk CLAIMED DEVICE     <span class="bold"><strong>PIONEER DVD-ROM DVD-305</strong></span>
                         /dev/dsk/c1t2d0 <span class="bold"><strong>/dev/rdsk/c1t2d0</strong></span>
target  4    8/16/5.7    tgt   CLAIMED DEVICE
ctl     <span class="bold"><strong>1</strong></span>    8/16/5.7.0  sctl  CLAIMED DEVICE     Initiator
                         /dev/rscsi/c1t7d0 /dev/rscsi/c1t7l0 /dev/scsi/c1t7l0
...
</pre><p>
Výstup na obrazovce ukazuje Pioneer DVD-ROM na SCSI adrese 2.
Instance karty pro hardwarovou cestu 8/16 je 1.
</p><p>
Vytvo&#345;te link ze surového za&#345;ízení na DVD za&#345;ízení.
</p><pre class="screen">
# ln -s /dev/rdsk/c<em class="replaceable"><code>&lt;SCSI bus instance&gt;</code></em>t<em class="replaceable"><code>&lt;SCSI target ID&gt;</code></em>d<em class="replaceable"><code>&lt;LUN&gt;</code></em> /dev/<em class="replaceable"><code>&lt;device&gt;</code></em>
</pre><p>
P&#345;íklad:
</p><pre class="screen">
# ln -s /dev/rdsk/c1t2d0 /dev/dvd
</pre><p>
Ní&#382;e uvádíme &#345;e&#353;ení n&#283;kterých b&#283;&#382;ných problém&#367;:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Spadne p&#345;i startu s hlá&#353;ením:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: finite (code) from /usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.00/3.2/../../../libGL.sl
</pre><p>
</p><p>
To znamená, &#382;e funkce <code class="systemitem">.finite().</code> není
dostupná ve standardní HP-UX matematické knihovn&#283;.
Místo ní je zde <code class="systemitem">.isfinite().</code>.
&#344;e&#353;ení: Pou&#382;ijte poslední Mesa depot soubor.
</p></li><li><p>
Spadne p&#345;i p&#345;ehrávání s hlá&#353;ením:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: sem_init (code) from /usr/local/lib/libSDL-1.2.sl.0
</pre><p>
</p><p>
&#344;e&#353;ení: Pou&#382;ijte volbu extralibdir v configure
<tt class="option">--with-extralibdir="/usr/lib -lrt"</tt>
</p></li><li><p>
MPlayer havaruje (segfault) s hlá&#353;ením:
</p><pre class="screen">
Pid 10166 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space, or stack size exceeded maxssiz.
Segmentation fault
</pre><p>
</p><p>
&#344;e&#353;ení:
HP-UX kernel má výchozí velikost zásobníku 8MB(?) na proces.(11.0 a
nov&#283;j&#353;í 10.20 patche vám umo&#382;ní zvý&#353;it <code class="systemitem">maxssiz</code> a&#382; na
350MB pro 32-bit programy). Musíte zv&#283;t&#353;it <code class="systemitem">maxssiz</code>
a rekompilovat kernel (a restartovat). Pro tento ú&#269;el m&#367;&#382;ete pou&#382;ít SAM. (Kdy&#382;
u&#382; to budete d&#283;lat, ov&#283;&#345;te parametr <code class="systemitem">maxdsiz</code> pro
maximální mno&#382;ství pam&#283;ti, které m&#367;&#382;e program pou&#382;ít. Závisí na va&#353;ich
aplikacích, jestli je výchozích 64MB dost nebo ne.)
</p></li></ul></div></div><div class="sect2" lang="cs"><div class="titlepage"><div><div><h3 class="title"><a name="aix"></a>12.3.4. AIX</h3></div></div></div><p>
<span class="application">MPlayer</span> lze úsp&#283;&#353;n&#283; p&#345;elo&#382;it na AIX 5.1,
5.2 a 5.3, pomocí GCC 3.3 nebo vy&#353;&#353;í. Kompilace
<span class="application">MPlayer</span>u na AIX 4.3.3 a ní&#382;sích nebyla
testována. Velmi doporu&#269;ujeme kompilovat
<span class="application">MPlayer</span> pomocí GCC 3.4 nebo va&#353;&#353;í,
nebo pokud kompilujete na
POWER5, vy&#382;aduje se GCC 4.0.
</p><p>
Ujist&#283;te se, &#382;e pou&#382;íváte GNU make
(<tt class="filename">/opt/freeware/bin/gmake</tt>) pro sestavení
<span class="application">MPlayer</span>u, jeliko&#382; p&#345;i pou&#382;ití
<tt class="filename">/usr/ccs/bin/make</tt> budete mít problémy.
</p><p>
Detekce procesoru je stále nedokon&#269;ena.
Testovány byly následující architektury:
</p><div class="itemizedlist"><ul type="disc"><li><p>604e</p></li><li><p>POWER3</p></li><li><p>POWER4</p></li></ul></div><p>
Následující architektury nebyly testovány, ale m&#283;ly by pracovat:
</p><div class="itemizedlist"><ul type="disc"><li><p>POWER</p></li><li><p>POWER2</p></li><li><p>POWER5</p></li></ul></div><p>
Zvuk p&#345;es Ultimedia Services není podporován, jeliko&#382; Ultimedia byla
opu&#353;t&#283;na v AIX 5.1; tudí&#353; je jedinou mo&#382;ností pou&#382;ití ovlada&#269;&#367; AIX Open
Sound System (OSS) od 4Front Technologies z <a href="http://www.opensound.com/aix.html" target="_top">http://www.opensound.com/aix.html
</a>.
4Front Technologies voln&#283; poskytuje OSS ovlada&#269;e pro AIX 5.1 pro
nekomer&#269;ní pou&#382;ití; zatím v&#353;ak neexistují zvukové ovlada&#269;e
pro AIX 5.2 nebo 5.3. To znamená, &#382;e <span class="bold"><strong>AIX 5.2
a 5.3 nejsou nyní schopny provozovat MPlayer se zvukem.</strong></span>
</p><p>&#344;e&#353;ení b&#283;&#382;ných potí&#382;í:</p><div class="itemizedlist"><ul type="disc"><li><p>
Pokud dostanete tuto chybovou hlá&#353;ku z <tt class="filename">configure</tt>:
</p><pre class="screen">
$ ./configure
...
Checking for iconv program ... no
No working iconv program found, use
--charset=US-ASCII to continue anyway.
Messages in the GTK-2 interface will be broken then.
</pre><p>
To proto, &#382;e AIX pou&#382;ívá nestandardní názvy znakových sad; proto
konverze výstupu MPlayeru do jiné znakové sady není zatím podporováno.
&#344;e&#353;ením je:
</p><pre class="screen">
$ ./configure --charset=noconv
</pre><p>
</p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bsd.html">P&#345;edcházející</a> </td><td width="20%" align="center"><a accesskey="u" href="ports.html">Nahoru</a></td><td width="40%" align="right"> <a accesskey="n" href="windows.html">Dal&#353;í</a></td></tr><tr><td width="40%" align="left" valign="top">12.2. *BSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Dom&#367;</a></td><td width="40%" align="right" valign="top"> 12.4. Windows</td></tr></table></div></body></html>
