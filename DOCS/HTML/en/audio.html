<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2.4. Audio output devices</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.49"><link rel="home" href="index.html" title="MPlayer - The Movie Player"><link rel="up" href="features.html" title="Chapter 2. Features"><link rel="previous" href="video.html" title="2.3. Video output devices"><link rel="next" href="tv-input.html" title="2.5. TV input"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.4. Audio output devices</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="video.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Features</th><td width="20%" align="right"> <a accesskey="n" href="tv-input.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="audio"></a>2.4. Audio output devices</h2></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="sync"></a>2.4.1. Audio/Video synchronisation</h3></div></div><p>
<span class="application">MPlayer</span>'s audio interface is called
<span class="emphasis"><i>libao2</i></span>. It currently contains these drivers:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Driver</th><th>Comment</th></tr></thead><tbody><tr><td>oss</td><td>
  OSS (ioctl) driver (supports hardware AC3 passthrough)
  </td></tr><tr><td>sdl</td><td>
  SDL driver (supports sound daemons like <span class="bold"><b>ESD</b></span>
  and <span class="bold"><b>ARTS</b></span>)
  </td></tr><tr><td>nas</td><td>
  NAS (Network Audio System) driver
  </td></tr><tr><td>alsa5</td><td>
  native ALSA 0.5 driver
  </td></tr><tr><td>alsa</td><td>
  native ALSA 0.9/1.0 driver (supports hardware AC3 passthrough)
  </td></tr><tr><td>sun</td><td>
  SUN audio driver (<tt class="filename">/dev/audio</tt>) for BSD and Solaris8 users
  </td></tr><tr><td>macosx</td><td>
  native Mac OS X driver
  </td></tr><tr><td>win32</td><td>
  native Win32 driver
  </td></tr><tr><td>arts</td><td>
  native ARTS driver (mostly for KDE users)
  </td></tr><tr><td>esd</td><td>
  native ESD driver (mostly for GNOME users)
  </td></tr><tr><td>jack</td><td>
  JACK (Jack Audio Connection Kit) driver
  </td></tr><tr><td>polyp</td><td>
  polypaudio driver
  </td></tr></tbody></table></div><p>
Linux sound card drivers have compatibility problems. This is because
<span class="application">MPlayer</span> relies on an in-built feature of
<span class="emphasis"><i>properly</i></span> coded sound drivers that enable them to
maintain correct audio/video sync. Regrettably, some driver authors
don't take the care to code this feature since it is not needed for
playing MP3s or sound effects.
</p><p>
Other media players like <a href="http://avifile.sf.net" target="_top">aviplay</a>
or <a href="http://xinehq.de" target="_top">xine</a> possibly work
out-of-the-box with these drivers because they use "simple" methods
with internal timing. Measuring showed that their methods are not as
efficient as <span class="application">MPlayer</span>'s.
</p><p>
Using <span class="application">MPlayer</span> with a properly written audio
driver will never result in A/V desyncs related to the audio, except
only with very badly created files (check the man page for workarounds).
</p><p>
If you happen to have a bad audio driver, try the <tt class="option">-autosync</tt>
option, it should sort out your problems. See the man page for detailed
information.
</p><div class="itemizedlist"><p><b>Some notes:</b></p><ul type="disc"><li><p>
  If you have an OSS driver, first try <tt class="option">-ao oss</tt> (this is
  the default).  If you experience glitches, halts or anything out of the
  ordinary, try <tt class="option">-ao sdl</tt> (NOTE: you need to have SDL libraries
  and header files installed). The SDL audio driver helps in a lot of cases
  and also supports ESD (GNOME) and ARTS (KDE).
  </p></li><li><p>
  If you have ALSA version 0.5, then you almost always have to use
  <tt class="option">-ao alsa5</tt>, since ALSA 0.5 has buggy OSS emulation code,
  and will <span class="bold"><b>crash <span class="application">MPlayer</span></b></span>
  with a message like this:
  <pre class="screen">
DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!</pre>
  </p></li><li><p>
  On Solaris, use the SUN audio driver with the <tt class="option">-ao sun</tt> option,
  otherwise neither video nor audio will work.
  </p></li><li><p>
  If the sound clicks when playing from CD-ROM, turn on IRQ unmasking, e.g.
  <b>hdparm -u1 /dev/cdrom</b> (<b>man hdparm</b>).
  This is generally beneficial and described in more detail in the
  <a href="drives.html" title="5.1. CD/DVD drives">CD-ROM</a> section.
 </p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="experiences"></a>2.4.2. Soundcard experiences, recommendations</h3></div></div><p>
On Linux, a 2.4.x kernel is highly recommended. Kernel 2.2 is not tested.
</p><p>
Linux sound drivers are primarily provided by the free version of OSS.
These drivers have been superseded by <a href="http://www.alsa-project.org" target="_top">ALSA</a>
(Advanced Linux Sound Architecture) in the 2.5 development series. If
your distribution does not already use ALSA you may wish to try their
drivers if you experience sound problems. ALSA drivers are generally
superior to OSS in compatibility, performance and features. But some
sound cards are only supported by the commercial OSS drivers from
<a href="http://www.opensound.com/" target="_top">4Front Technologies</a>.
They also support several non-Linux systems.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col><col><col><col></colgroup><thead><tr><th rowspan="3" valign="middle">SOUND CARD</th><th colspan="4">DRIVER</th><th rowspan="3" valign="middle">Max kHz</th><th rowspan="3" valign="middle">Max Channels</th><th rowspan="3" valign="middle">Max Opens
      <sup>[<a name="maxopens" href="#ftn.maxopens">a</a>]</sup></th></tr><tr><th>OSS/Free</th><th>ALSA</th><th>OSS/Pro</th><th>other</th></tr></thead><tbody><tr><td>VIA onboard (686/A/B, 8233, 8235)</td><td><a href="http://sf.net/project/showfiles.php?group_id=3242&amp;release_id=59602" target="_top">via82cxxx_audio</a></td><td>snd-via82xx</td><td> </td><td> </td><td>4-48 kHz or 48 kHz only, depending on the chipset</td><td> </td><td> </td></tr><tr><td>Aureal Vortex 2</td><td>none</td><td>none</td><td>OK</td><td><a href="http://aureal.sf.net" target="_top">Linux Aureal Drivers</a><a href="http://makacs.poliod.hu/~pontscho/aureal/au88xx-1.1.3.tar.bz2" target="_top">buffer size increased to 32k</a></td><td>48</td><td>4.1</td><td>5+</td></tr><tr><td>SB Live!</td><td>Analog OK, S/PDIF not working</td><td>Both OK</td><td>Both OK</td><td><a href="http://opensource.creative.com" target="_top">Creative's OSS driver (S/PDIF support)</a></td><td>192</td><td>4.0/5.1</td><td>32</td></tr><tr><td>SB 128 PCI (es1371)</td><td>OK</td><td>?</td><td> </td><td> </td><td>48</td><td>stereo</td><td>2</td></tr><tr><td>SB AWE 64</td><td>max 44kHz</td><td>48kHz sounds bad</td><td> </td><td> </td><td>48</td><td> </td><td> </td></tr><tr><td>GUS PnP</td><td>none</td><td>OK</td><td>OK</td><td> </td><td>48</td><td> </td><td> </td></tr><tr><td>Gravis UltraSound ACE</td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>Gravis UltraSound MAX</td><td>OK</td><td>OK (?)</td><td> </td><td> </td><td>48</td><td> </td><td> </td></tr><tr><td>ESS 688</td><td>OK</td><td>OK (?)</td><td> </td><td> </td><td>48</td><td> </td><td> </td></tr><tr><td>C-Media cards (CMI8338/8738)</td><td>OK</td><td>OK S/PDIF is supported with ALSA 0.9.x</td><td>?</td><td> </td><td>44</td><td>stereo</td><td>1</td></tr><tr><td>Yamaha cards (*ymf*)</td><td>not OK (?) (maybe <tt class="option">-ao sdl</tt>)</td><td>OK only with ALSA 0.5 with OSS emulation
      <span class="bold"><b>AND</b></span><tt class="option">-ao sdl</tt> (!) (?)</td><td> </td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>Cards with envy24 chips (like Terratec EWS88MT)</td><td>?</td><td>?</td><td>OK</td><td> </td><td>?</td><td> </td><td> </td></tr><tr><td>PC Speaker or DAC</td><td>OK</td><td>none</td><td> </td><td><a href="http://www.geocities.com/stssppnn/pcsp.html" target="_top">Linux PC speaker OSS driver</a></td><td>The driver emulates 44.1, maybe more.</td><td>mono</td><td>1</td></tr></tbody><tbody class="footnotes"><tr><td colspan="8"><div class="footnote"><p><sup>[<a name="ftn.maxopens" href="#maxopens">a</a>] </sup><sup>[<a name="ftn.maxopens" href="#maxopens">a</a>] </sup>the number of applications that are able to use
          the device <span class="emphasis"><i>at the same time</i></span>.</p></div></td></tr></tbody></table></div><p>
Feedback to this document is welcome. Please tell us how
<span class="application">MPlayer</span> and your sound card(s) worked together.
</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="af"></a>2.4.3. Audio filters</h3></div></div><p>
  The old audio plugins have been superseded by a new audio filter layer. Audio
  filters are used for changing the properties of the audio data before the
  sound reaches the sound card. The activation and deactivation of the filters
  is normally automated but can be overridden. The filters are activated when
  the properties of the audio data differ from those required by the sound card
  and deactivated if unnecessary. The <tt class="option">-af filter1,filter2,...</tt>
  option is used to override the automatic activation of filters or to insert
  filters that are not automatically inserted. The filters will be executed as
  they appear in the comma separated list.
</p><p>
Example:
<pre class="screen">mplayer -af resample,pan <i><tt>movie.avi</tt></i></pre>
would run the sound through the resampling filter followed by the pan filter.
Observe that the list must not contain any spaces, else it will fail.
</p><p>
The filters often have options that change their behavior. These options
are explained in detail in the sections below. A filter will execute using
default settings if its options are omitted. Here is an example of how to use
filters in combination with filter specific options:
<pre class="screen">mplayer -af resample=11025,pan=1:0.5:0.5 -channels 1 -srate 11025 <i><tt>media.avi</tt></i></pre>
would set the output frequency of the resample filter to 11025Hz and downmix
the audio to 1 channel using the pan filter.
</p><p>
The overall execution of the filter layer is controlled using the
<tt class="option">-af-adv</tt> option. This option has two suboptions:
</p><p>
<tt class="option">force</tt> is a bit field that controls how the filters
are inserted and what speed/accuracy optimizations they use:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">0</tt></span></dt><dd><p>
Use automatic insertion of filters and optimize according to CPU speed.
</p></dd><dt><span class="term"><tt class="option">1</tt></span></dt><dd><p>
Use automatic insertion of filters and optimize for the highest speed.
<span class="emphasis"><i>Warning:</i></span> Some features in the audio filters may
silently fail, and the sound quality may drop.
</p></dd><dt><span class="term"><tt class="option">2</tt></span></dt><dd><p>
Use automatic insertion of filters and optimize for quality.
</p></dd><dt><span class="term"><tt class="option">3</tt></span></dt><dd><p>
Use no automatic insertion of filters and no optimization.
<span class="emphasis"><i>Warning:</i></span> It may be possible to crash <span class="application">MPlayer</span>
using this setting.
</p></dd><dt><span class="term"><tt class="option">4</tt></span></dt><dd><p>
Use automatic insertion of filters according to 0 above,
but use floating point processing when possible.
</p></dd><dt><span class="term"><tt class="option">5</tt></span></dt><dd><p>
Use automatic insertion of filters according to 1 above,
but use floating point processing when possible.
</p></dd><dt><span class="term"><tt class="option">6</tt></span></dt><dd><p>
Use automatic insertion of filters according to 2 above,
but use floating point processing when possible.
</p></dd><dt><span class="term"><tt class="option">7</tt></span></dt><dd><p>
Use no automatic insertion of filters according to 3 above,
and use floating point processing when possible.
</p></dd></dl></div><p>
<tt class="option">list</tt> is an alias for the -af option.
</p><p>
The filter layer is also affected by the following generic options:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-v</tt></span></dt><dd><p>
Increases the verbosity level and makes most filters print out extra
status messages.
</p></dd><dt><span class="term"><tt class="option">-channels</tt></span></dt><dd><p>
This option sets the number of output channels you would like your
sound card to use. It also affects the number of channels that are
being decoded from the media. If the media contains less channels
than requested the channels filter (see below) will automatically
be inserted. The routing will be the default routing for the channels
filter.
</p></dd><dt><span class="term"><tt class="option">-srate</tt></span></dt><dd><p>
This option selects the sample rate you would like your sound card
to use (of course the cards have limits on this). If the sample frequency
of your sound card is different from that of the current media, the resample
filter (see below) will be inserted into the audio filter layer to compensate
for the difference.
</p></dd><dt><span class="term"><tt class="option">-format</tt></span></dt><dd><p>
This option sets the sample format between the audio filter layer and the
sound card. If the requested sample format of your sound card is different
from that of the current media, a format filter (see below) will be inserted
to rectify the difference.
</p></dd></dl></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_resample"></a>2.4.3.1. Up/Downsampling</h4></div></div><p>
<span class="application">MPlayer</span> fully supports sound up/down-sampling through the
<tt class="option">resample</tt> filter. It can be used if you
have a fixed frequency sound card or if you are stuck with an old sound card
that is only capable of max 44.1kHz. This filter is automatically enabled if
it is necessary, but it can also be explicitly enabled on the command line. It
has three options:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">srate &lt;8000-192000&gt;</tt></span></dt><dd><p>
    is an integer used for setting the output sample
    frequency in Hz. The valid range for this parameter is 8kHz to 192kHz. If
    the input and output sample frequency are the same or if this parameter is
    omitted the filter is automatically unloaded. A high sample frequency
    normally improves the audio quality, especially when used in combination
    with other filters.
</p></dd><dt><span class="term"><tt class="option">sloppy</tt></span></dt><dd><p>
    is an optional binary parameter that allows the output frequency to differ
    slightly from the frequency given by <tt class="option">srate</tt>. This option
    can be used if the startup of the playback is extremely slow. It is enabled
    by default.
</p></dd><dt><span class="term"><tt class="option">type &lt;0-2&gt;</tt></span></dt><dd><p>
    is an optional integer between <tt>0</tt> and <tt>2</tt> that
    selects which resampling method to use. Here <tt>0</tt> represents
    linear interpolation as resampling method, <tt>1</tt> represents
    resampling using a poly-phase filter-bank and integer processing and
    <tt>2</tt> represents resampling using a poly-phase filter-bank and
    floating point processing. Linear interpolation is extremely fast, but
    suffers from poor sound quality especially when used for up-sampling. The
    best quality is given by <tt>2</tt> but this method also suffers from
    the highest CPU load.
</p></dd></dl></div><p>Example:
<pre class="screen">mplayer -af resample=44100:0:0</pre>
would set the output frequency of the resample filter to 44100Hz using exact output
frequency scaling and linear interpolation.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_channels"></a>2.4.3.2. Changing the number of channels</h4></div></div><p>
The <tt class="option">channels</tt> filter can be used for adding and removing
channels, it can also be used for routing or copying channels. It is
automatically enabled when the output from the audio filter layer differs from
the input layer or when it is requested by another filter. This filter unloads
itself if not needed. The number of options is dynamic:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">nch &lt;1-6&gt;</tt></span></dt><dd><p>
  is an integer between <tt>1</tt> and <tt>6</tt> that is used
  for setting the number of output channels. This option is required, leaving it
  empty results in a runtime error.
</p></dd><dt><span class="term"><tt class="option">nr &lt;1-6&gt;</tt></span></dt><dd><p>
  is an integer between <tt>1</tt> and <tt>6</tt> that is used
  for specifying the number of routes. This parameter is optional. If it is
  omitted the default routing is used.
</p></dd><dt><span class="term"><tt class="option">from1:to1:from2:to2:from3:to3...</tt></span></dt><dd><p>
  are pairs of numbers between <tt>0</tt> and <tt>5</tt>
  that define where each channel should be routed.
</p></dd></dl></div><p>
  If only <tt class="option">nch</tt> is given the default routing is used, it works
  as follows: If the number of output channels is bigger than the number of input
  channels empty channels are inserted (except mixing from mono to stereo, then
  the mono channel is repeated in both of the output channels). If the number of
  output channels is smaller than the number of input channels the exceeding
  channels are truncated.
</p><p>
Example 1:
<pre class="screen">mplayer -af channels=4:4:0:1:1:0:2:2:3:3 <i><tt>media.avi</tt></i></pre>
would change the number of channels to 4 and set up 4 routes that swap
channel 0 and channel 1 and leave channel 2 and 3 intact. Observe that
if media containing two channels was played back, channels 2 and 3 would
contain silence but 0 and 1 would still be swapped.
</p><p>
Example 2:
<pre class="screen">mplayer -af channels=6:4:0:0:0:1:0:2:0:3 <i><tt>media.avi</tt></i></pre>
would change the number of channels to 6 and set up 4 routes that copy
channel 0 to channels 0 to 3. Channel 4 and 5 will contain silence.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_format"></a>2.4.3.3. Sample format converter</h4></div></div><p>
The <tt class="option">format</tt> filter converts between different sample formats. It
  is automatically enabled when needed by the sound card or another filter.
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">bps &lt;number&gt;</tt></span></dt><dd><p>
    can be <tt>1</tt>, <tt>2</tt> or <tt>4</tt> and
    denotes the number of bytes per sample. This option is required, leaving it empty
    results in a runtime error.
</p></dd><dt><span class="term"><tt class="option">f &lt;format&gt;</tt></span></dt><dd><p>
    is a text string describing the sample format. The string is a
    concatenated mix of: <tt class="option">alaw</tt>, <tt class="option">mulaw</tt> or
    <tt class="option">imaadpcm</tt>, <tt class="option">float</tt> or <tt class="option">int</tt>,
    <tt class="option">unsigned</tt> or <tt class="option">signed</tt>, <tt class="option">le</tt> or
    <tt class="option">be</tt> (little- or big-endian). This option is required,
    leaving it empty results in a runtime error.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af format=4:float <i><tt>media.avi</tt></i></pre>
would set the output format to 4 bytes per sample floating point data.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_delay"></a>2.4.3.4. Delay</h4></div></div><p>
The <tt class="option">delay</tt> filter delays the sound to the loudspeakers such that
the sound from the different channels arrives at the listening position
simultaneously.
It is only useful if you have more than 2 loudspeakers. This filter has a
variable number of parameters:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">d1:d2:d3...</tt></span></dt><dd><p>
    are floating point numbers representing the delays in ms that should be
    imposed on the different channels. The minimum delay is 0ms and the maximum
    is 1000ms.
</p></dd></dl></div><p>
To calculate the required delay for the different channels do as follows:
</p><div class="orderedlist"><ol type="1"><li><p>
    Measure the distance to the loudspeakers in meters in relation to your
    listening position, giving you the distances s1 to s5 (for a 5.1 system).
    There is no point in compensating for the sub-woofer (you will not hear the
    difference anyway).
</p></li><li><p>
Subtract the distances s1 to s5 from the maximum distance i.e.
    s[i] = max(s) - s[i]; i = 1...5
</p></li><li><p>
Calculate the required delays in ms as
    d[i] = 1000*s[i]/342; i = 1...5
</p></li></ol></div><p>
Example:
<pre class="screen">mplayer -af delay=10.5:10.5:0:0:7:0 <i><tt>media.avi</tt></i></pre>
would delay front left and right by 10.5ms, the two rear channels and the sub
by 0ms and the center channel by 7ms.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_volume"></a>2.4.3.5. Software volume control</h4></div></div><p>Software volume control is implemented by the <tt class="option">volume</tt>
audio filter. Use this filter with caution since it can reduce the signal to
noise ratio of the sound. In most cases it is best to set the level for the
PCM sound to max, leave this filter out and control the output level to your
speakers with the master volume control of the mixer. In case your sound card
has a digital PCM mixer instead of an analog one, and you hear distortion,
use the MASTER mixer instead. If there is an external amplifier connected to
the computer (this is almost always the case), the noise level can be minimized
by adjusting the master level and the volume knob on the amplifier until the
hissing noise in the background is gone. This filter has two options:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">v &lt;-200 - +60&gt;</tt></span></dt><dd><p>
    is a floating point number between <tt>-200</tt> and <tt>+60</tt>
    which represents the volume level in dB. The default level is 0dB.
</p></dd><dt><span class="term"><tt class="option">c</tt></span></dt><dd><p>
    is a binary control that turns soft clipping on and off. Soft-clipping can
    make the sound more smooth if very high volume levels are used. Enable this
    option if the dynamic range of the loudspeakers is very low. Be aware that
    this feature creates distortion and should be considered a last resort.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af volume=10.1:0 <i><tt>media.avi</tt></i></pre>
would amplify the sound by 10.1dB and hard-clip if the sound level is too high.
</p><p>
This filter has a second feature: It measures the overall maximum sound level
and prints out that level when <span class="application">MPlayer</span> exits.
This volume estimate can be used for setting the sound level in
<span class="application">MEncoder</span> such that the maximum dynamic range is utilized.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_equalizer"></a>2.4.3.6. Equalizer</h4></div></div><p>
The <tt class="option">equalizer</tt> filter represents a 10 octave band graphic
equalizer, implemented using 10 IIR band pass filters. This means that
it works regardless of what type of audio is being played back. The center
frequencies for the 10 bands are:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Band No.</th><th>Center frequency</th></tr></thead><tbody><tr><td>0</td><td>31.25 Hz</td></tr><tr><td>1</td><td>62.50 Hz</td></tr><tr><td>2</td><td>125.0 Hz</td></tr><tr><td>3</td><td>250.0 Hz</td></tr><tr><td>4</td><td>500.0 Hz</td></tr><tr><td>5</td><td>1.000 kHz</td></tr><tr><td>6</td><td>2.000 kHz</td></tr><tr><td>7</td><td>4.000 kHz</td></tr><tr><td>8</td><td>8.000 kHz</td></tr><tr><td>9</td><td>16.00 kHz</td></tr></tbody></table></div><p>
If the sample rate of the sound being played back is lower than the center
frequency for a frequency band, then that band will be disabled. A known
bug with this filter is that the characteristics for the uppermost band
are not completely symmetric if the sample rate is close to the center
frequency of that band. This problem can be worked around by up-sampling
the sound using the resample filter before it reaches this filter.
</p><p>
This filter has 10 parameters:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">g1:g2:g3...g10</tt></span></dt><dd><p>
are floating point numbers between <tt>-12</tt> and <tt>+12</tt>
representing the gain in dB for each frequency band.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af equalizer=11:11:10:5:0:-12:0:5:12:12 <i><tt>media.avi</tt></i></pre>
would amplify the sound in the upper and lower frequency region while
canceling it almost completely around 1kHz.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_panning"></a>2.4.3.7. Panning filter</h4></div></div><p>
Use the <tt class="option">pan</tt> filter to mix channels arbitrarily. It is
basically a combination of the volume control and the channels filter.
There are two major uses for this filter:
</p><div class="orderedlist"><ol type="1"><li><p>
Down-mixing many channels to only a few, stereo to mono for example.
</p></li><li><p>
Varying the "width" of the center speaker in a surround sound system.
</p></li></ol></div><p>
This filter is hard to use, and will require some tinkering before the
desired result is obtained. The number of options for this filter
depends on the number of output channels:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">nch &lt;1-6&gt;</tt></span></dt><dd><p>
is an integer between <tt>1</tt> and <tt>6</tt> and is used
for setting the number of input channels. This option is required, leaving it
empty results in a runtime error.
</p></dd><dt><span class="term"><tt class="option">l00:l01:l02:..l10:l11:l12:...ln0:ln1:ln2:...</tt></span></dt><dd><p>
are floating point values between <tt>0</tt> and <tt>1</tt>.
<tt class="option">l[i][j]</tt> determines how much of input channel j is mixed into
output channel i.
</p></dd></dl></div><p>
Example 1:
<pre class="screen">mplayer -af pan=1:0.5:0.5 -channels 1 <i><tt>media.avi</tt></i></pre>
would down-mix from stereo to mono.
</p><p>
Example 2:
<pre class="screen">mplayer -af pan=3:1:0:1:0.5:0.5 -channels 3 <i><tt>media.avi</tt></i></pre>
would give 3 channel output leaving channels 0 and 1 intact, and mix
channels 0 and 1 into output channel 2 (which could be sent to a
sub-woofer for example).
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_sub"></a>2.4.3.8. Sub-woofer</h4></div></div><p>
The <tt class="option">sub</tt> filter adds a sub woofer channel to the audio
stream. The audio data used for creating the sub-woofer channel is an
average of the sound in channel 0 and channel 1. The resulting sound is
then low-pass filtered by a 4th order Butterworth filter with a default
cutoff frequency of 60Hz and added to a separate channel in the audio
stream. Warning: Disable this filter when you are playing DVDs with Dolby
Digital 5.1 sound, otherwise this filter will disrupt the sound to the
sub-woofer. This filter has two parameters:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">fc &lt;20-300&gt;</tt></span></dt><dd><p>
    is an optional floating point number used for setting the cutoff frequency
    for the filter in Hz. The valid range is 20Hz to 300Hz. For the best result
    try setting the cutoff frequency as low as possible. This will improve the
    stereo or surround sound experience. The default cutoff frequency is 60Hz.
</p></dd><dt><span class="term"><tt class="option">ch &lt;0-5&gt;</tt></span></dt><dd><p>
    is an optional integer between <tt>0</tt> and <tt>5</tt>
    which determines the channel number in which to insert the sub-channel audio.
    The default is channel number <tt>5</tt>. Observe that the number of
    channels will automatically be increased to <i><tt>ch</tt></i> if
    necessary.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af sub=100:4 -channels 5 <i><tt>media.avi</tt></i></pre>
would add a sub-woofer channel with a cutoff frequency of
100Hz to output channel 4.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_surround"></a>2.4.3.9. Surround-sound decoder</h4></div></div><p>
Matrix encoded surround sound can be decoded by the <tt class="option">surround</tt>
filter. Dolby Surround is an example of a matrix encoded format. Many files
with 2 channel audio actually contain matrixed surround sound. To use this
feature you need a sound card supporting at least 4 channels. This filter has
one parameter:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">d &lt;0-1000&gt;</tt></span></dt><dd><p>
is an optional floating point number between <tt>0</tt> and
<tt>1000</tt> used for setting the delay time in ms for the
rear speakers. This delay should be set as follows: if d1 is the distance
from the listening position to the front speakers and d2 is the distance
from the listening position to the rear speakers, then the delay d should
be set to 15ms if d1 &lt;= d2 and to 15 + 5*(d1-d2) if d1 &gt; d2. The default
value for d is 20ms.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af surround=15 -channels 4 <i><tt>media.avi</tt></i></pre>
would add surround sound decoding with 15ms delay for the sound to the
rear speakers.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_export"></a>2.4.3.10. Audio Exporter</h4></div></div><p>
This audio filter exports the incoming signal to other processes using memory
mapping (<tt>mmap()</tt>). Memory mapped areas contain a header:

<pre class="programlisting">
int nch                      /*number of channels*/
int size		     /*buffer size*/
unsigned long long counter   /*Used to keep sync, it's updated
                               every time new data is exported.*/
</pre>

The rest is payload (non-interleaved) 16bit data.
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">mmapped_file</tt></span></dt><dd><p>
The file you want this filter to export to. The default is to map to
<tt class="filename">~/.mplayer/mplayer-af_export</tt>.
</p></dd><dt><span class="term"><tt class="option">nsamples</tt></span></dt><dd><p>
Number of samples per channel. The default is <tt>512</tt> samples.
</p></dd></dl></div><p>
Example:
<pre class="screen">mplayer -af export=/tmp/mplayer-af_export:1024 <i><tt>media.avi</tt></i></pre>
would export 1024 samples per channel to <tt class="filename">/tmp/mplayer-af_export</tt>.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_extrastereo"></a>2.4.3.11. Extrastereo</h4></div></div><p>
This audio filter (linearly) increases the difference between left and
right channels (like the <span class="application">XMMS</span> extrastereo
plugin) which adds some sort of "live" effect to playback.
This filter has one parameter:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">mul</tt></span></dt><dd><p>
is the difference coefficient, an optional floating point number that defaults
to <tt>2.5</tt>. If you set it to <tt>0.0</tt>, you will
have mono sound (average of both channels). If you set it to
<tt>1.0</tt>, sound will be unchanged, if you set it to
<tt>-1.0</tt>, left and right channels will be swapped.
</p></dd></dl></div><p>
Usage:
<pre class="screen">
mplayer -af extrastereo <i><tt>media.avi</tt></i>
mplayer -af extrastereo=3.45 <i><tt>media.avi</tt></i></pre>
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="af_volnorm"></a>2.4.3.12. Volume normalizer</h4></div></div><p>
This audio filter maximizes the volume without distorting the sound.
</p><p>
Usage:
<pre class="screen">mplayer -af volnorm <i><tt>media.avi</tt></i></pre>
</p></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="audio-plugins"></a>2.4.4. Audio plugins (deprecated)</h3></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><span class="bold"><b>Audio plugins have been deprecated by audio filters and will
be removed soon.</b></span></p></div><p>
<span class="application">MPlayer</span> has support for audio plugins.  Audio
plugins can be used for changing the properties of the audio data before
the sound reaches the sound card. They are enabled using the
<tt class="option">-aop</tt> switch which takes a
<tt class="option">list=plugin1,plugin2,...</tt> argument. The
<tt class="option">list</tt> argument is required and determines which plugins
should be used and in which order they should be executed. Example:

<pre class="screen">mplayer <i><tt>media.avi</tt></i> -aop list=resample,format</pre>

would run the sound through the resampling plugin followed by the format
plugin.
</p><p>
The plugins can also have switches that change their behavior. These
switches are explained in detail in the sections below. A plugin will
execute using default settings if its switches are omitted.  Here is an
example of how to use plugins in combination with plugin specific switches:

<pre class="screen">mplayer <i><tt>media.avi</tt></i> -aop list=resample,format:fout=44100:format=0x8</pre>

would set the output frequency of the resample plugin to 44100 Hz and the
output format of the format plugin to AFMT_U8.
</p><p>
Currently audio plugins can not be used in
<span class="application">MEncoder</span>.
</p><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="updn-sampling"></a>2.4.4.1. Up/Downsampling</h4></div></div><p>
<span class="application">MPlayer</span> fully supports up/downsampling of the sound. This plugin can be
used if you have a fixed frequency sound card or if you are stuck with an
old sound card that is only capable of max 44.1 kHz. Limitations in your
hardware are not auto detected, so you have to specify the sample frequency
explicitly. This plugin has one switch: <tt class="option">fout</tt> which is used for setting the
desired output sample frequency. It defaults to 48 kHz, and is given in
Hz.
</p><p>
Usage:

<pre class="screen">
mplayer <i><tt>media.avi</tt></i> -aop list=resample:fout=<i><tt>freq</tt></i></pre>

where <tt><i><tt>freq</tt></i></tt> is the frequency
in Hz, like <tt>44100</tt>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
The output frequency should not be scaled up from the default value.
Scaling up will cause the audio and video streams to be played in slow
motion in addition to audio distortion.
</p></div></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="surround-decode"></a>2.4.4.2. Surround Sound decoding</h4></div></div><p>
<span class="application">MPlayer</span> has an audio plugin that can decode
matrix encoded surround sound. Dolby Surround is an example of a matrix
encoded format.  Many files with 2 channel audio actually contain matrixed
surround sound.  To use this feature you need a sound card supporting at
least 4 channels.
</p><p>
Usage:
<pre class="screen">mplayer <i><tt>media.avi</tt></i> -aop list=surround</pre>
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="sample-format-conv"></a>2.4.4.3. Sample format converter</h4></div></div><p>
If your sound card driver does not support signed 16-bit int data type,
this plugin can be used to change the format to one which your sound card
can understand. It has one switch, <tt class="option">format</tt>, which can be
set to one of the numbers found in <tt class="filename">libao2/afmt.h</tt>. This
plugin is hardly ever needed and is intended for advanced users. Keep in
mind that this plugin only changes the sample format and not the sample
frequency or the number of channels.
</p><p>
Usage:

<pre class="screen">
mplayer <i><tt>media.avi</tt></i> -aop list=format:format=<i><tt>outfmt</tt></i></pre>

where <tt><i><tt>outfmt</tt></i></tt> is the
required output format.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="audio-delay"></a>2.4.4.4. Delay</h4></div></div><p>
This plugin delays the sound and is intended as an example of how to
develop new plugins. It can not be used for anything useful from a users
perspective and is mentioned here for the sake of completeness only. Do not
use this plugin unless you are a developer.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="sw-volume"></a>2.4.4.5. Software volume control</h4></div></div><p>
This plugin is a software replacement for the volume control, and can be
used on machines with a broken mixer device. It can also be used if one
wants to change the output volume of <span class="application">MPlayer</span>
without changing the PCM volume setting in the mixer. It has one switch
<tt class="option">volume</tt> that is used for setting the initial sound level.
The initial sound level can be set to values between 0 and 255 and defaults
to 101 which equals 0dB amplification. Use this plugin with caution since
it can reduce the signal to noise ratio of the sound. In most cases it is
best to set the level for the PCM sound to max, leave this plugin out and
control the output level to your speakers with the master volume control of
the mixer. If there is an external amplifier connected to the computer
(this is almost always the case), the noise level can be minimized by
adjusting the master level and the volume knob on the amplifier until the
hissing noise in the background is gone.
</p><p>
Usage:
<pre class="screen">
mplayer <i><tt>media.avi</tt></i> -aop list=volume:volume=<i><tt>0-255</tt></i></pre>
</p><p>
This plugin also has compressor or "soft-clipping" capabilities.
Compression can be used if the dynamic range of the sound is very high or
if the dynamic range of the loudspeakers is very low. Be aware that this
feature creates distortion and should be considered a last resort.
</p><p>
Usage:
<pre class="screen">
mplayer <i><tt>media.avi</tt></i> -aop list=volume:softclip</pre>
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="extrastereo"></a>2.4.4.6. Extrastereo</h4></div></div><p>
This plugin (linearly) increases the difference between left and right
channels (like the <span class="application">XMMS</span> extrastereo plugin) which gives some
sort of "live" effect to playback.
</p><p>
Usage:
<pre class="screen">
mplayer <i><tt>media.avi</tt></i> -aop list=extrastereo
mplayer <i><tt>media.avi</tt></i> -aop list=extrastereo:mul=3.45</pre>

The default coefficient (<tt class="option">mul</tt>) is a float number that
defaults to 2.5. If you set it to <tt>0.0</tt>, you will have
mono sound (average of both channels). If you set it to
<tt>1.0</tt>, sound will be unchanged, if you set it to
<tt>-1.0</tt>, left and right channels will be swapped.
</p></div><div class="sect3"><div class="titlepage"><div><h4 class="title"><a name="volnorm"></a>2.4.4.7. Volume normalizer</h4></div></div><p>
This plugin maximizes the volume without distorting the sound.
</p><p>
Usage:
<pre class="screen">mplayer <i><tt>media.avi</tt></i> -aop list=volnorm</pre>
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="video.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="features.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tv-input.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.3. Video output devices </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.5. TV input</td></tr></table></div></body></html>
