<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>13.4. Encodé avec le codec XviD</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - Le Lecteur Vidéo"><link rel="up" href="encoding-guide.html" title="Chapitre 13. L'encodage avec MEncoder"><link rel="prev" href="menc-feat-enc-libavcodec.html" title="13.3. Encodage avec la famille de codec libavcodec"><link rel="next" href="menc-feat-x264.html" title="13.5. Encodage avec le codec x264"><link rel="preface" href="howtoread.html" title="Comment lire cette documentation"><link rel="chapter" href="intro.html" title="Chapitre 1. Introduction"><link rel="chapter" href="install.html" title="Chapitre 2. Installation"><link rel="chapter" href="usage.html" title="Chapitre 3. Utilisation"><link rel="chapter" href="cd-dvd.html" title="Chapitre 4. Utilisation des CD/DVD"><link rel="chapter" href="faq.html" title="Chapitre 5. Foire Aux Questions"><link rel="chapter" href="containers.html" title="Chapitre 6. Conteneurs"><link rel="chapter" href="codecs.html" title="Chapitre 7. Codecs Supportés"><link rel="chapter" href="video.html" title="Chapitre 8. Sorties vidéo"><link rel="chapter" href="audio.html" title="Chapitre 9. Périphériques de sortie audio"><link rel="chapter" href="tv.html" title="Chapitre 10. TV"><link rel="chapter" href="ports.html" title="Chapitre 11. Ports"><link rel="chapter" href="mencoder.html" title="Chapitre 12. Utilisation basique de MEncoder"><link rel="chapter" href="encoding-guide.html" title="Chapitre 13. L'encodage avec MEncoder"><link rel="appendix" href="mailinglists.html" title="Annexe A. Listes de diffusion"><link rel="appendix" href="bugreports.html" title="Annexe B. Comment rapporter les bogues"><link rel="appendix" href="bugs.html" title="Annexe C. Bogues connus"><link rel="appendix" href="skin.html" title="Annexe D. Format de skins MPlayer"><link rel="appendix" href="users-vs-dev.html" title="Annexe E. Lamentations du développeur"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-intro" title="13.4.1. Quelles options devrais-je utiliser pour avoir les meilleurs résultats?"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-encoding-options" title="13.4.2. Options d'encodage de XviD"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-encoding-profiles" title="13.4.3. Profils d'encodage"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-example-settings" title="13.4.4. Exemples de paramètres d'encodage"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.4. Encodé avec le codec <code class="systemitem">XviD</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="menc-feat-enc-libavcodec.html">Précédent</a> </td><th width="60%" align="center">Chapitre 13. L'encodage avec <span class="application">MEncoder</span></th><td width="20%" align="right"> <a accesskey="n" href="menc-feat-x264.html">Suivant</a></td></tr></table><hr></div><div class="sect1" lang="fr"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-xvid"></a>13.4. Encodé avec le codec <code class="systemitem">XviD</code></h2></div></div></div><p>
 <code class="systemitem">XviD</code> est une bibliothèque libre pour
 encoder les flux vidéo de MPEG-4 ASP.
 Avant de commencer à encoder, vous avez besoin de <a href="video-codecs.html#xvid" title="7.1.8. XviD">
 paramétrer <span class="application">MEncoder</span> pour son support</a>.
</p><p>
 Ce guide a pour principal objectif de fournir le même genre d'information que
 le guide d'encodage de x264.
 Par conséquent, commencez par lire
 <a href="menc-feat-x264.html#menc-feat-x264-encoding-options-intro" title="13.5.1.1. Introduction">la première partie</a>
 de ce guide.
</p><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-intro"></a>13.4.1. Quelles options devrais-je utiliser pour avoir les meilleurs résultats?</h3></div></div></div><p>
 Commencez par passer en revue la page man de la section 
 <code class="systemitem">XviD</code> de <span class="application">MPlayer</span>.
 Cette section est prévue pour être un supplément à la page man.
</p><p>
 Les paramètres XviD par défaut font déjà une bonne distinction entre la 
 vitesse et la qualité, donc vous pouvez sans risque vous en tenir à eux 
 si la section suivante vous laisse perplexe.
</p></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-options"></a>13.4.2. Options d'encodage de <code class="systemitem">XviD</code></h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
 <span class="bold"><strong>vhq</strong></span>
  Ce paramètre affecte l'algorithme de choix de macrobloc, où plus la valeur 
  du paramètre est élevée, meilleure sera la décision.
  Le paramètre par défaut peut être utilisé de façon sûre pour tous les encodages, 
  alors que des paramètres plus élevés aident toujours le PSNR mais sont significativement
  plus lents.
  Veuillez noter qu'un meilleur PSNR ne veut pas forcément dire que l'image 
  sera mieux, mais vous informe de la proximité par rapport à l'image originale.
  Désactiver l'option accélérera de façon notable l'encodage; si la vitesse est un point 
  critique pour vous, la différence peut valoir le coup.
</p></li><li><p>
 <span class="bold"><strong>bvhq</strong></span>
  C'est pareil que vhq, mais cela agit sur les B-frames.
  L'impact sur la vitesse est négatives, et la qualité est un peu améliorée
  (environ +0.1dB PSNR).
</p></li><li><p>
 <span class="bold"><strong>max_bframes</strong></span>
  Un plus grand nombre de B-frames consécutives permis améliore habituellement
  la compressibilité, bien qu'il puisse également entraîner plus d'artefacts carrés.
  Le paramétrage par défaut est un bon compromis entre compressibilité et qualité, 
  mais vous pouvez l'augmenter jusqu'à 3 si vous êtes obnubilé par le bitrate.
  Vous pouvez aussi le réduire à 1 ou 0 si vous avez pour seul but la qualité 
  parfaite, cependant dans votre cas vous devriez vous assurer que le bitrate 
  cible est assez élevé pour que l'encodeur n'ait pas à augmenter le 
  quantificateur pour l'atteindre.
</p></li><li><p>
 <span class="bold"><strong>bf_threshold</strong></span>
  Ceci contrôle la sensibilité de l'encodeur pour les B-frames, où une plus haute
  valeur amène à ce que plus de B-frames soit utilisé (et vice versa).
  Ce paramètre doit être utilisé avec <tt class="option">max_bframes</tt>;
  si vous êtes obnubilé par le bitrate, vous devrez augmenter <tt class="option">max_bframes</tt> 
  et <tt class="option">bf_threshold</tt>, tandis que vous devriez augmenter <tt class="option">max_bframes</tt> 
  et réduire <tt class="option">bf_threshold</tt> ainsi donc l'encodeur peut utiliser plus de B-frames 
  aux seuls endroits qui les nécessitent <span class="bold"><strong>vraiment</strong></span>.
  Un nombre bas de <tt class="option">max_bframes</tt> et une valeur élevée de <tt class="option">bf_threshold</tt> 
  n'est probablement pas un choix avisé vu qu'il obligera l'encodeur à mettre 
  des B-frames en des endroits qui n'en tireront pas de bénéfice, mais en plus 
  réduiront la qualité visuelle.
  Cependant, si vous avez besoin d'être compatible avec des lecteurs qui 
  supportent seulement de vieilles versions DivX (ce qui revient à supporter jusqu'à 
  1 B-frame consécutive), ceci sera votre seul espoir d'augmenter la 
  compressibilité en utilisant les B-frames.
</p></li><li><p>
 <span class="bold"><strong>trellis</strong></span>
  Optimise la procédure de quantification pour obtenir un compromis optimal
  entre le PSNR et le bitrate, ce qui permet de sauver de manière significative 
  des bits.
  Ces bits seront en retour utilisés autre part sur la vidéo, augmentant l'ensemble 
  de la qualité visuelle.
  Vous devriez toujours l'utiliser étant donné qu'il impacte énormément sur la 
  qualité.
  Même si vous recherchez de la vitesse, ne le désactivez pas jusqu'à ce que 
  vous réduisiez <tt class="option">vhq</tt> et toutes les autres options plus gourmandes 
  en CPU à leur minimum.
</p></li><li><p>
  <span class="bold"><strong>hq_ac</strong></span>
  Active une meilleure méthode d'estimation du coût en coefficient, ce qui réduit 
  passablement la taille de fichier par environ 0.15 à 0.19% (ce qui correspond
  à moins de 0.01dB PSNR d'augmentation), tandis qu'elle a un impact négligeable 
  sur la vitesse.
  Il est néanmoins recommandé de toujours la laisser activée.
</p></li><li><p>
 <span class="bold"><strong>cartoon</strong></span>
  Faite pour un meilleur encodage de contenu dessin animé, et n'a pas d'impact 
  sur la vitesse étant donné qu'il modifie juste les heuristiques
  pour ce type de contenu.
</p></li><li><p>
 <span class="bold"><strong>me_quality</strong></span>
  Ce paramètre contrôle la précision de l'estimation de mouvement.
  Le plus élevé <tt class="option">me_quality</tt> est, le plus précis
  l'estimation du mouvement d'origine sera, et mieux le clip résultant 
  capturera le mouvement d'origine.
 </p><p>
  Le paramètre par défaut est le mieux dans tous les cas; bien qu'il ne 
  soit pas recommandé de le désactiver à moins que vous recherchiez vraiment 
  la rapidité, vu que tout les bits sauvés par une bonne estimation du 
  mouvement seront dépensés autre part, augmentant la qualité générale.
  Cependant, n'allez pas plus bas que 5, et même ceci doit être utilisé 
  en dernier recours.
</p></li><li><p>
 <span class="bold"><strong>chroma_me</strong></span>
  Améliore l'estimation de mouvement en prenant aussi en compte l'information 
  de la chroma (couleur), alors que <tt class="option">me_quality</tt> toute seule 
  utilise seulement la luma (niveau de gris).
  Cela ralenti l'encodage de 5-10% mais améliore pas mal la qualité visuelle 
  en réduisant les effets de bloc et réduit la taille de fichier d'environ 1.3%.
  Si vous cherchez de la vitesse, vous devriez désactiver cette option avant de
  commencer à considérer à la réduction de <tt class="option">me_quality</tt>.
</p></li><li><p>
  <span class="bold"><strong>chroma_opt</strong></span>
    A pour objectif d'augmenter la qualité  du chroma de l'image vers des 
    bords blanc/noirs pures, plutôt que d'améliorer la compression.
    Ceci peut aider à réduire l'effet "red stairs".
</p></li><li><p>
  <span class="bold"><strong>lumi_mask</strong></span>
    Tente de donner moins de bitrate à une partie de l'image que l'oeil humain 
    ne peut pas très bien voir, ce qui devrait permettre à l'encodeur de dépenser
    les bits sauvés sur des parties plus importantes de l'image.
    La qualité de l'encodage liée à cette option dépend grandement des 
    préférences personnelles et des paramètres de type et moniteurs utilisés pour 
    le regarder (typiquement, cela ne semblera pas aussi bon si c'est plus 
    lumineux ou si c'est un moniteur TFT).
</p></li><li><p>
  <span class="bold"><strong>qpel</strong></span>
    Élève le nombre de vecteurs de mouvement candidats en augmentant la
    précision de l'estimation de mouvement de halfpel (demi-pixel) à quarterpel (quart de pixel).
    L'idée est de trouver de meilleurs vecteurs de mouvement pour
    réduire le bitrate (ou augmenter la qualité à bitrate constant).
    Cependant, les vecteurs de mouvement avec une précision quarterpel requièrent 
    quelques bits en plus à coder, mais les vecteurs candidats ne donnent pas 
    toujours des résultats vraiment meilleurs.
    Assez souvent, le codec gaspille encore des bits sur la précision en plus, 
    mais en retour il n'y aura que peu ou pas de qualité supplémentaire.
    Malheureusement, il n'y a aucune façon de prévoir les avantages possible de
    <tt class="option">qpel</tt>, donc vous avez précisément besoin de l'encoder avec 
    et sans pour en être sûr.
  </p><p>
    <tt class="option">qpel</tt> peut quasiment doubler la durée d'encodage, et ne
    requiert pas moins de 25% de puissance processeur en plus pour décoder.
    Cela n'est pas supporté par tous les lecteurs.
</p></li><li><p>
  <span class="bold"><strong>gmc</strong></span>
    Essaie de sauver des bits sur des scènes panoramiques en employant un 
    vecteur simple de mouvement pour la frame entière.
    Cela augmente à peu près toujours le PSNR, mais ralentit l'encodage
    de façon significative (et aussi le décodage).
    Par conséquent, vous devriez seulement l'employer si vous avez 
    augmenté <tt class="option">vhq</tt> au maximum.
    Le GMC de <code class="systemitem">XviD</code> est plus sophistiqué 
    que celui de DivX, mais il est seulement supporté par quelques lecteurs.
</p></li></ul></div></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-profiles"></a>13.4.3. Profils d'encodage</h3></div></div></div><p>
  XviD supporte des profils d'encodage via l'option <tt class="option">profile</tt>,
  ce qui est utilisé pour imposer des restrictions sur les propriétés du flux 
  vidéo XviD pour qu'il puisse être relu sur tout ce qui supporte le profil 
  choisi.
  Les restrictions relient les résolutions, les bitrates et certaines 
  fonctionnalités MPEG-4.
  La table suivante montre ce que chaque profil supporte.
</p><div class="informaltable"><table border="1"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td align="center"> </td><td colspan="4" align="center">Simple</td><td colspan="6" align="center">Simple avancé</td><td colspan="6" align="center">DivX</td></tr><tr><td align="center">Nom de profil</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">Handheld</td><td align="center">NTSC Portable</td><td align="center">PAL Portable</td><td align="center">NTSC Home Cinéma</td><td align="center">PAL Home Cinéma</td><td align="center">TV Haute Définition</td></tr><tr><td align="center">Largeur [pixels]</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">720</td><td align="center">1280</td></tr><tr><td align="center">Hauteur [pixels]</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">576</td><td align="center">576</td><td align="center">144</td><td align="center">240</td><td align="center">288</td><td align="center">480</td><td align="center">576</td><td align="center">720</td></tr><tr><td align="center">Frame rate [fps]</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">25</td><td align="center">30</td><td align="center">25</td><td align="center">30</td></tr><tr><td align="center">Bitrate moyen maxi [kbps]</td><td align="center">64</td><td align="center">64</td><td align="center">128</td><td align="center">384</td><td align="center">128</td><td align="center">128</td><td align="center">384</td><td align="center">768</td><td align="center">3000</td><td align="center">8000</td><td align="center">537.6</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">9708.4</td></tr><tr><td align="center">Bitrate moyen maximal plus de 3 secs [kbps]</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">800</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">16000</td></tr><tr><td align="center">B-frames maxi</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">Quantification MPEG</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Quantification adaptative</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Encodage entrelacé</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Quaterpixel</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Compensation globale du mouvement</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-example-settings"></a>13.4.4. Exemples de paramètres d'encodage</h3></div></div></div><p>
  Les paramètres suivant sont des exemples de différentes combinaisons 
  d'option d'encodage qui affectent la compensation entre la vitesse et 
  la qualité pour le même bitrate cible.
</p><p>
  Tous les paramètres d'encodage ont été testés sur un échantillon vidéo à 
  720x448 @30000/1001 fps, le bitrate cible était à 900kbps, et la machine 
  était un AMD-64 3400+ à 2400 Mhz en mode 64 bits.
  Chaque paramètre d'encodage exploite la vitesse d'encodage mesuré (en
  frames par seconde) et la perte PSNR (en dB) en la comparant au paramètre 
  de "très haute qualité".
  Veuillez comprendre que selon votre source vidéo, votre type de machine
  les développements logiciels, vous pouvez obtenir des résultats très 
  différents.
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Options d'encodage</th><th>vitesse (en fps)</th><th>Perte PSNR relative (en dB)</th></tr></thead><tbody><tr><td>Très haute qualité</td><td><tt class="option">chroma_opt:vhq=4:bvhq=1:quant_type=mpeg</tt></td><td>16fps</td><td>0dB</td></tr><tr><td>Haute qualité</td><td><tt class="option">vhq=2:bvhq=1:chroma_opt:quant_type=mpeg</tt></td><td>18fps</td><td>-0.1dB</td></tr><tr><td>Rapide</td><td><tt class="option">turbo:vhq=0</tt></td><td>28fps</td><td>-0.69dB</td></tr><tr><td>Temps réel</td><td><tt class="option">turbo:nochroma_me:notrellis:max_bframes=0:vhq=0</tt></td><td>38fps</td><td>-1.48dB</td></tr></tbody></table></div><p>
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="menc-feat-enc-libavcodec.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="encoding-guide.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="menc-feat-x264.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">13.3. Encodage avec la famille de codec <code class="systemitem">libavcodec</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 13.5. Encodage avec le codec <code class="systemitem">x264</code></td></tr></table></div></body></html>
