<html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2"><title>12.3. Komercyjny Unix</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - Odtwarzacz filmów"><link rel="up" href="ports.html" title="Rozdzia³ 12. Porty"><link rel="prev" href="bsd.html" title="12.2. *BSD"><link rel="next" href="windows.html" title="12.4. Windows"><link rel="preface" href="howtoread.html" title="Jak czytaæ tê dokumentacjê"><link rel="chapter" href="intro.html" title="Rozdzia³ 1. Wprowadzenie"><link rel="chapter" href="install.html" title="Rozdzia³ 2. Instalacja"><link rel="chapter" href="usage.html" title="Rozdzia³ 3. Sposób u¿ycia"><link rel="chapter" href="cd-dvd.html" title="Rozdzia³ 4. U¿ywanie CD/DVD"><link rel="chapter" href="faq.html" title="Rozdzia³ 5. FAQ - Czêsto Zadawane Pytania"><link rel="chapter" href="formats.html" title="Rozdzia³ 6. Kontenery"><link rel="chapter" href="codecs.html" title="Rozdzia³ 7. Obs³ugiwane kodeki"><link rel="chapter" href="video.html" title="Rozdzia³ 8. Urz±dzenia wyj¶cia video"><link rel="chapter" href="audio.html" title="Rozdzia³ 9. Urz±dzenia wyj¶ciowe audio"><link rel="chapter" href="tv.html" title="Rozdzia³ 10. TV"><link rel="chapter" href="radio.html" title="Rozdzia³ 11. Radio"><link rel="chapter" href="ports.html" title="Rozdzia³ 12. Porty"><link rel="chapter" href="mencoder.html" title="Rozdzia³ 13. Podstawy u¿ywania MEncodera"><link rel="chapter" href="encoding-guide.html" title="Rozdzia³ 14. Kodowanie przy u¿yciu MEncodera"><link rel="appendix" href="bugreports.html" title="Dodatek A. Jak zg³aszaæ b³êdy"><link rel="appendix" href="bugs.html" title="Dodatek B. Znane b³êdy"><link rel="appendix" href="skin.html" title="Dodatek C. Format skórki MPlayera"><link rel="appendix" href="history.html" title="Dodatek D. Historia"><link rel="subsection" href="unix.html#solaris" title="12.3.1. Solaris"><link rel="subsection" href="unix.html#irix" title="12.3.2. IRIX"><link rel="subsection" href="unix.html#hp-ux" title="12.3.3. HP-UX"><link rel="subsection" href="unix.html#aix" title="12.3.4. AIX"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.3. Komercyjny Unix</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bsd.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 12. Porty</th><td width="20%" align="right"> <a accesskey="n" href="windows.html">Nastêpny</a></td></tr></table><hr></div><div class="sect1" lang="pl"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix"></a>12.3. Komercyjny Unix</h2></div></div></div><p>
<span class="application">MPlayer</span> zosta³ przeportowany na wiele komercyjnych
wariantów Uniksa. Jako, ¿e ¶rodowiska programistyczne przewa¿nie ró¿ni± siê od tych
znajdowanych w wolnych Uniksach, byæ mo¿e bêdziesz musia³ wprowadziæ rêczne
poprawki, aby program skompilowa³ siê poprawnie.
</p><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>12.3.1. Solaris</h3></div></div></div><p>
<span class="application">MPlayer</span> powinien dzia³aæ na Solarisie 2.6 lub nowszym.
Mo¿esz skorzystaæ ze sterownika d¼wiêku SUN'a podaj±æ opcjê <tt class="option">-ao sun</tt>.
</p><p>
Na <span class="bold"><strong>UltraSPARCach</strong></span>,
<span class="application">MPlayer</span> korzysta z rozszerzenia
<span class="bold"><strong>VIS</strong></span> (odpowiednik MMX), obecnie tylko w
<span class="emphasis"><em><code class="systemitem">libmpeg2</code></em></span>,
<span class="emphasis"><em><code class="systemitem">libavo</code></em></span> i
<span class="emphasis"><em><code class="systemitem">libavcodec</code></em></span>,
ale nie w <code class="systemitem">mp3lib</code>. Mo¿esz ogl±daæ plik VOB na
procesorze z taktowaniem 400MHz. Bêdziesz potrzebowa³ do tego biblioteki
<a href="http://www.sun.com/sparc/vis/mediaLib.html" target="_top">
<code class="systemitem">mLib</code></a>.
</p><p><span class="bold"><strong>Caveat:</strong></span></p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>mediaLib</strong></span> jest
			<span class="bold"><strong>aktualnie wy³±czone</strong></span> w domy¶lnej
			konfiguracji <span class="application">MPlayera</span>, z powodu b³êdów.
			U¿ytkownicy SPARC-ów, którzy buduj± MPlayera z obs³ug± mediaLib
			informowali o delikatnym, zielonymi miganiu wideo kodowane i dekodowanego
			przez libavcodec. Mo¿esz w³±czyæ mediaLib, je¿eli chcesz u¿ywaj±c:
			</p><pre class="screen">
				$ ./configure --enable-mlib
				</pre><p>
			Robisz to na w³asne ryzyko. U¿ytkownicy x86 powinni
			<span class="bold"><strong>nigdy</strong></span> nie u¿ywaæ mediaLib,
			poniewa¿ w efekcie otrzymaj± kiepsk± wydajno¶æ MPlayera.
			</p></li></ul></div><p>
Aby zbudowaæ pakiet, bêdziesz potrzebowa³ GNU <span class="application">make</span>
(<tt class="filename">gmake</tt>, <tt class="filename">/opt/sfw/gmake</tt>), rdzenne make
Solarisa nie zadzia³a. Typowy b³±d jaki otrzymujesz, buduj±c tym drugim zamiast GNU
make, to:
</p><pre class="screen">
   % /usr/ccs/bin/make
   make: Fatal error in reader: Makefile, line 25: Unexpected end of line seen
</pre><p>
</p><p>
W Solarisie przeznaczonym dla SPARC, potrzebujesz kompilatora GNU C/C++; nie ma
znaczenia, czy jest on skonfigurowany z, czy bez GNU assemblera.
</p><p>
Na Solarisie x86, potrzebujesz GNU assemblera i kompilatora GNU C/C++,
skonfigurowanego do u¿ywania GNU assemblera! Kod
<span class="application">MPlayera</span>, na platformie x86, w znacz±cy sposób korzysta
z instrukcji MMX, SSE i 3DNOW!, które nie mog± byæ skompilowane przy pomocy
assemblera Sun <tt class="filename">/usr/ccs/bin/as</tt>.
</p><p>
Skrypt <tt class="filename">configure</tt> stara siê okre¶liæ, jaki assembler
wywo³ywany jest przez komendê "gcc" (je¿eli próba zakoñczy siê fiaskiem,
u¿yj opcji <tt class="option">--as=<em class="replaceable"><code>/gdziekolwiek/zainstalowa³e¶/gnu-as</code></em></tt>,
¿eby okre¶liæ gdzie skrypt <tt class="filename">configure</tt> mo¿e znale¼æ GNU "as" w Twoim
systemie).
</p><p>Rozwi±zania najczêstszych problemów:</p><div class="itemizedlist"><ul type="disc"><li><p>
			B³±d jaki wy¶wietli <tt class="filename">configure</tt> na Solarisie x86,
			u¿ywaj±cym GCC bez GNU assemblera:
</p><pre class="screen">
   % configure
   ...
   Checking assembler (/usr/ccs/bin/as) ... , failed
   Please upgrade(downgrade) binutils to 2.10.1...
</pre><p>
(Rozwi±zanie: Zainstaluj i u¿ywaj gcc skonfigurowanego z opcj± <tt class="option">--with-as=gas</tt>)
</p><p>
Typowy b³±d, jaki otrzymasz przy próbie budowy kompilatorem GNU C, który nie u¿ywa GNU as:
</p><pre class="screen">
   % gmake
   ...
   gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
        -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
   Assembler: mplayer.c
   "(stdin)", line 3567 : Illegal mnemonic
   "(stdin)", line 3567 : Syntax error
   ... more "Illegal mnemonic" and "Syntax error" errors ...
</pre><p>
</p></li><li><p><span class="application">MPlayer</span> mo¿e siê wysypaæ
		podczas dekodowania i kodowania wideo u¿ywaj±cych win32codecs:
		</p><pre class="screen">
			...
			Trying to force audio codec driver family acm...
			Opening audio decoder: [acm] Win32/ACM decoders
			sysi86(SI86DSCR): Invalid argument
			Couldn't install fs segment, expect segfault
			
			
			MPlayer interrupted by signal 11 in module: init_audio_codec
			...
		</pre><p>
		Dzieje siê tak z powodu zmian w sysi86() w Solaris 10 i wydaniach
		pre-Solaris Nevada b31. Zosta³o to naprawione w Solaris Nevada b32;
		jednak Sun nie przeniós³ jeszcze poprawki do Solarisa 10. Projekt
		MPlayer poinformowa³ o tym problemie Sun i ³atka jest aktualnie
		wprowadzana do Solarisa 10. Wiêcej informacji o tym b³êdzie mo¿e
		zostaæ znaleziona  na stronie:
		<a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413" target="_top">http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413</a>.
		</p></li><li><p>
		Ze wzglêdu na b³êdy wystêpuj±ce w Solarisie 8, mo¿esz nie byæ w stanie odtwarzaæ
		p³yt DVD o pojemno¶ci wiêkszej ni¿ 4 GB:
</p><div class="itemizedlist"><ul type="circle"><li><p>
Sterownik sd(7D) dla Solarisa 8 x86 ma b³±d ujawniaj±cy siê przy próbie dostêpu do
bloku dyskowego &gt;4GB urz±dzenia korzystaj±cego z logicznego rozmiaru bloku !=DEV_BSIZE
(np. no¶nik CD-ROM i DVD). Ze wzglêdu na przepe³nienie 32bitowych liczb ca³kowitych,
odczytywany jest adres dysku modulo 4GB
(<a href="http://groups.yahoo.com/group/solarisonintel/message/22516" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22516</a>).
Ten problem nie wystêpuje na Solarisie 8 przeznaczonym dla procesorów SPARC.
</p></li><li><p>
Podobny b³±d wystêpuje w kodzie systemu plików hsfs(7FS) (znanym jako ISO9660),
hsfs mo¿e nie obs³ugiwaæ partycji/dysków wiêkszych ni¿ 4GB, wszystkie dane s±
odczytywane z bloku modulo 4GB
(<a href="http://groups.yahoo.com/group/solarisonintel/message/22592" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22592</a>).
Problem mo¿e byæ rozwi±zany przy pomocy ³atki 109764-04 (sparc) / 109765-04 (x86).
</p></li></ul></div></li></ul></div></div><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="irix"></a>12.3.2. IRIX</h3></div></div></div><p>
Mo¿esz albo spróbowaæ zainstalowaæ program GNU install i (je¿eli nie
umie¶ci³e¶ go w globalnej ¶cie¿ce) wskazaæ go przez:
</p><pre class="screen">./configure --with-install=
<em class="replaceable"><code>/¶cie¿ka/i/nazwa/programu/instalacyjnego</code></em></pre><p>
</p><p>
Albo u¿yæ domy¶lnego programu instalacyjnego dostarczonego z IRIX 6.5, w tym
wypadku nale¿y rêcznie zmodyfikowaæ plik <tt class="filename">Makefile</tt> w
kilku miejscach. Zmieñ poni¿sze dwie linijki:
</p><pre class="programlisting">
  $(INSTALL) -c -m 644 DOCS/mplayer.1 $(MANDIR)/man1/mplayer.1

  $(INSTALL) -c -m 644 etc/codecs.conf $(CONFDIR)/codecs.conf
</pre><p>
na:
</p><pre class="programlisting">
  $(INSTALL) -m 644 mplayer.1 $(MANDIR)/man1/

  $(INSTALL) -m 644 codecs.conf $(CONFDIR)/
</pre><p>
A potem wykonaj (w katalogu ¼ród³owym <span class="application">MPlayera</span>):
</p><pre class="screen">cp DOCS/mplayer.1 . ; cp etc/codecs.conf .</pre><p>
i dalej skompiluj i zainstaluj.
</p></div><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="hp-ux"></a>12.3.3. HP-UX</h3></div></div></div><p>
Joe Page umie¶ci³ na swojej stronie domowej
<a href="http://users.rcn.com/joepage/mplayer_on_hpux11.htm" target="_top">dokument
HOWTO</a> stworzony przez Martina Gansser'a dotycz±cy <span class="application">MPlayera</span>
na HP-UX. Korzystaj±c z zawartych tam intrukcji program powinien siê skompilowaæ bez
najmniejszych problemów. Poni¿sze informacje s± zaczerpniête z tego opracowania.
</p><p>
Do budowy bêdziesz potrzebowa³ GCC 3.4.0, GNU make 3.80, i SDL 1.2.7 lub ich
nowszych wersji. Kompilator HP cc nie wyprodukuje dzia³aj±cego programu,
a wcze¶niejsze wersje GCC s± pe³ne b³êdów.
Aby moæ skorzystaæ z OpenGL, musisz zainstalowaæ biblioteki Mesa, wtedy
sterowniki wyj¶cia video gl i gl2 powinny dzia³aæ. Ich wydajno¶æ mo¿e byæ
tragiczna, jednak zale¿ne jest to od mocy obliczeniowej procesora. Dobrym
zamiennikiem, raczej kiepskiego, systemu d¼wiêkowego HP-UX jest GNU esound.
</p><p>
Stwórz urz±dzenie DVD, przeskanuj magistralê SCSI komend±:
</p><pre class="screen">
# ioscan -fn

Class          I            H/W   Path          Driver    S/W State    H/W Type        Description
...
ext_bus 1    8/16/5      c720  CLAIMED INTERFACE  Built-in SCSI
target  3    8/16/5.2    tgt   CLAIMED DEVICE
disk    4    8/16/5.<span class="bold"><strong>2</strong></span>.<span class="bold"><strong>0</strong></span>  sdisk CLAIMED DEVICE     <span class="bold"><strong>PIONEER DVD-ROM DVD-305</strong></span>
                         /dev/dsk/c1t2d0 <span class="bold"><strong>/dev/rdsk/c1t2d0</strong></span>
target  4    8/16/5.7    tgt   CLAIMED DEVICE
ctl     <span class="bold"><strong>1</strong></span>    8/16/5.7.0  sctl  CLAIMED DEVICE     Initiator
                         /dev/rscsi/c1t7d0 /dev/rscsi/c1t7l0 /dev/scsi/c1t7l0
...
</pre><p>
Z rezultatów dzia³ania komendy mo¿emy odczytaæ, ¿e na adresie 2 SCSI znajduje
siê Pioneer DVD-ROM. Instancja karty dla ¶cie¿ki sprzêtowej 8/16 to 1.
</p><p>
Stwórz dowi±zanie surowego urz±dzenia do urz±dzenia DVD.
</p><pre class="screen">
# ln -s /dev/rdsk/c<em class="replaceable"><code>&lt;instancja magistrali SCSI&gt;</code></em>t<em class="replaceable"><code>&lt;ID docelowego SCSI&gt;</code></em>d<em class="replaceable"><code>&lt;LUN&gt;</code></em> /dev/<em class="replaceable"><code>&lt;urz±dzenie&gt;</code></em>
</pre><p>
Przyk³ad:
</p><pre class="screen">
# ln -s /dev/rdsk/c1t2d0 /dev/dvd
</pre><p>
Poni¿ej znajduj± siê rozwi±zania kilku najczêstszych problemów:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Wysypanie siê programu przy uruchamianiu z komunikatem b³êdu:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: finite (code) from /usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.00/3.2/../../../libGL.sl
</pre><p>
</p><p>
Oznacza to, ¿e funkcja <code class="systemitem">.finite().</code> jest niedostêpna
w standardowej bibliotece math HP-UX.
Zamiast niej dostêpna jest <code class="systemitem">.isfinite().</code>.
Rozwi±zanie: Skorzystaj z najnowszego pliku sk³adowego Mesa.
</p></li><li><p>
Wysypanie siê programu przy odtwarzaniu z komunikatem:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: sem_init (code) from /usr/local/lib/libSDL-1.2.sl.0
</pre><p>
</p><p>
Rozwi±zanie: Skorzystaj z opcji extralibdir skryptu configure
<tt class="option">--with-extralibdir="/usr/lib -lrt"</tt>
</p></li><li><p>
MPlayer powoduje b³±d naruszenia ochrony pamiêci (segfault) z komunikatem:
</p><pre class="screen">
Pid 10166 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space, or stack size exceeded maxssiz.
Segmentation fault
</pre><p>
</p><p>
Rozwiazanie:
J±dro HP-UX ma domy¶lnie zdefiniowany rozmiar stosu przeznaczonego na ka¿dy
proces i jest to 8MB(?).(11.0 i nowsze ³atki 10.20 pozwalaj± Ci zwiêkszyæ
parametr <code class="systemitem">maxssiz</code> do 350MB dla 32-bitowych programów).
Musisz rozszerzyæ <code class="systemitem">maxssiz</code> i przekompilowaæ j±dro
(i uruchomiæ ponownie komputer). Mo¿esz wykorzystaæ do tego celu SAM. (Kiedy
w nim bêdziesz, sprawd¼ warto¶æ <code class="systemitem">maxdsiz</code>. Okre¶la ona
maksymalny rozmiar danych, jak± program mo¿e u¿yæ. To czy domy¶lne 64MB wystarczy
czy nie, zale¿y wy³±cznie od wymagañ Twoich aplikacji.)
</p></li></ul></div></div><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="aix"></a>12.3.4. AIX</h3></div></div></div><p>
<span class="application">MPlayer</span> kompiluje siê z powodzenie na AIX 5.1,
5.2 i 5.3, korzystaj±c z GCC 3.3 lub wy¿szego. Budowanie
<span class="application">MPlayer</span> na AIX 4.3.3 i ni¿szych nie
by³o sprawdzane. Zaleca siê, aby¶ budowal <span class="application">MPlayera</span>
u¿ywaj±c GCC 3.4 lub wy¿szego lub je¿eli kompilujesz na POWER5 - GCC 4.0.
</p><p>
Upenij siê, ¿e u¿ywasz GNU make (<tt class="filename">/opt/freeware/bin/gmake</tt>), aby
kompilowaæ <span class="application">MPlayera</span>, jako ¿e mo¿esz napotkaæ na problemy
przy korzystaniu z <tt class="filename">/usr/ccs/bin/make</tt>.
</p><p>
Wykrywanie CPU jest ci±gle dopracowywane.
Poni¿sze architektury zosta³y przetestowane:
</p><div class="itemizedlist"><ul type="disc"><li><p>604e</p></li><li><p>POWER3</p></li><li><p>POWER4</p></li></ul></div><p>
Poni¿sze architektury nie by³y testowane, ale i tak powinny dzia³aæ:
</p><div class="itemizedlist"><ul type="disc"><li><p>POWER</p></li><li><p>POWER2</p></li><li><p>POWER5</p></li></ul></div><p>
D¼wiêk przez Ultimedia Services nie jest obs³ugiwany, jako ¿e ta technologia
zosta³a porzucona w AIX 5.1; dlatego te¿, jedynym wyj¶ciem jest korzystanie
ze sterowników AIX Open Sound System (OSS) tworzonych przez 4Front Technologies,
znajdziesz je na
<a href="http://www.opensound.com/aix.html" target="_top">http://www.opensound.com/aix.html
</a>.
4Front Technologies udostêpnia swoje sterowniki OSS za darmo do niekomercyjnego
zastosowania; jednak¿e, nie ma aktualnie sterowników wyj¶cia audio dla AIX 5.2 lub 5.3.
Oznacza to, ¿e <span class="bold"><strong>AIX 5.2 i 5.3 nie potrafi± aktualnie u¿ywaæ
	wyj¶cia audio MPlayera.</strong></span>
</p><p>Rozwi±zania czêstych problemów:</p><div class="itemizedlist"><ul type="disc"><li><p>
			Je¿eli otrzymujesz od <tt class="filename">configure</tt> taki komunikat b³êdu:
			</p><pre class="screen">
				$ ./configure
				...
				Checking for iconv program ... no
				No working iconv program found, use
				--charset=US-ASCII to continue anyway.
				Messages in the GTK-2 interface will be broken then.
				</pre><p>
				To dzieje siê tak dlatego, ¿e AIX u¿ywa nie standardowych
				zestawów nazw znaków; dlatego te¿, konwersja wyj¶cia MPlayera
				do innego zestawu znaków (kodowania) nie jest aktualnie obs³ugiwana.
				Rozwi±zaniem jest u¿ycie:
			</p><pre class="screen">
				$ ./configure --charset=noconv
				</pre><p>
			</p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bsd.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="ports.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="windows.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">12.2. *BSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 12.4. Windows</td></tr></table></div></body></html>
