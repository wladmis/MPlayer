<html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2"><title>10.1. Wej¶cie TV</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - Odtwarzacz filmów"><link rel="up" href="tv.html" title="Rozdzia³ 10. TV"><link rel="prev" href="tv.html" title="Rozdzia³ 10. TV"><link rel="next" href="radio.html" title="Rozdzia³ 11. Radio"><link rel="preface" href="howtoread.html" title="Jak czytaæ tê dokumentacjê"><link rel="chapter" href="intro.html" title="Rozdzia³ 1. Wprowadzenie"><link rel="chapter" href="install.html" title="Rozdzia³ 2. Instalacja"><link rel="chapter" href="usage.html" title="Rozdzia³ 3. Sposób u¿ycia"><link rel="chapter" href="cd-dvd.html" title="Rozdzia³ 4. U¿ywanie CD/DVD"><link rel="chapter" href="faq.html" title="Rozdzia³ 5. FAQ - Czêsto Zadawane Pytania"><link rel="chapter" href="formats.html" title="Rozdzia³ 6. Kontenery"><link rel="chapter" href="codecs.html" title="Rozdzia³ 7. Obs³ugiwane kodeki"><link rel="chapter" href="video.html" title="Rozdzia³ 8. Urz±dzenia wyj¶cia video"><link rel="chapter" href="audio.html" title="Rozdzia³ 9. Urz±dzenia wyj¶ciowe audio"><link rel="chapter" href="tv.html" title="Rozdzia³ 10. TV"><link rel="chapter" href="radio.html" title="Rozdzia³ 11. Radio"><link rel="chapter" href="ports.html" title="Rozdzia³ 12. Porty"><link rel="chapter" href="mencoder.html" title="Rozdzia³ 13. Podstawy u¿ywania MEncodera"><link rel="chapter" href="encoding-guide.html" title="Rozdzia³ 14. Kodowanie przy u¿yciu MEncodera"><link rel="appendix" href="bugreports.html" title="Dodatek A. Jak zg³aszaæ b³êdy"><link rel="appendix" href="bugs.html" title="Dodatek B. Znane b³êdy"><link rel="appendix" href="skin.html" title="Dodatek C. Format skórki MPlayera"><link rel="appendix" href="history.html" title="Dodatek D. Historia"><link rel="subsection" href="tv-input.html#tv-compilation" title="10.1.1. Kompilacja"><link rel="subsection" href="tv-input.html#tv-tips" title="10.1.2. Wskazówki u¿ytkowania"><link rel="subsection" href="tv-input.html#tv-examples" title="10.1.3. Przyk³ady"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.1. Wej¶cie TV</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tv.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 10. TV</th><td width="20%" align="right"> <a accesskey="n" href="radio.html">Nastêpny</a></td></tr></table><hr></div><div class="sect1" lang="pl"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-input"></a>10.1. Wej¶cie TV</h2></div></div></div><p>
Sekcja ta opisuje jak <span class="bold"><strong>ogl±daæ/nagrywaæ obraz
za pomoc± tunera TV kompatybilnego z V4L</strong></span>. Zajrzyj do strony man
by zobaczyæ opis opcji TV i klawiszy steruj±cych.
</p><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="tv-compilation"></a>10.1.1. Kompilacja</h3></div></div></div><div class="procedure"><ol type="1"><li><p>
  Najpierw musisz przekompilowaæ. <tt class="filename">./configure</tt> wykryje
  automatycznie nag³ówki j±dra zwi±zane z V4L i obecno¶æ urz±dzeñ
  <tt class="filename">/dev/video*</tt>. Je¶li istniej±, obs³uga TV zostanie
  wbudowana (zobacz wynik dzia³ania <tt class="filename">./configure</tt>).
  </p></li><li><p>
  Upewnij siê, ¿e Twój tuner dzia³a z innymi programami do obs³ugi TV pod
  Linuksem, na przyk³ad <span class="application">XawTV</span>.
  </p></li></ol></div></div><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="tv-tips"></a>10.1.2. Wskazówki u¿ytkowania</h3></div></div></div><p>
Kompletna lista opcji dostêpna jest na stronie man.
Tu jest tylko kilka wskazówek:
</p><div class="itemizedlist"><ul type="disc"><li><p>
U¿ywaj opcji <tt class="option">channels</tt>. Przyk³ad
</p><pre class="screen">-tv channels=26-MTV1,23-TV2</pre><p>
Wyja¶nienie: u¿ywaj±c tej opcji, tylko kana³y 23 i 26 bêd± dostêpne oraz pojawi
siê fajny napis na OSD przy zmianie kana³u, wy¶wietlaj±cy jego nazwê.
Odstêpy w nazwie kana³u musz± zostaæ zast±pione znakiem "_".
</p></li><li><p>
U¿ywaj rozs±dnych rozmiarów obrazu. Rozmiary obrazu wynikowego powinny
byæ podzielne przez 16.
</p></li><li><p>
Je¶li nagrywasz obraz video o pionowej rozdzielczo¶ci wiêkszej ni¿ po³owa
rozdzielczo¶ci pe³nej (np. 288 dla PAL lub 240 dla NTSC), wtedy 'ramki'
które otrzymasz bêd± tak naprawdê parami poprzeplatanych (interleaved) pól.
W zale¿no¶ci od tego, co chcesz zrobiæ ze strumieniem wideo, mo¿esz go zostawiæ
w takiej formie, u¿yæ destrukcyjnego usuwania przeplotu (deinterlacing),
albo rozdzieliæ pary na pojedyncze pola.
</p><p>
W przeciwnym wypadku dostaniesz
film, który jest zniekszta³cony w trakcie scen o du¿ej dynamice, a wskazana
szybko¶æ transmisji (bitrate) prawdopodobnie nie bêdzie nawet mog³a byæ
utrzymana przez kontroler szybko¶ci (bitrate controller),
poniewa¿ artefakty przeplotu tworz± du¿e ilo¶ci szczegó³ów,
a co za tym idzie, potrzebuj± du¿ej przepustowo¶ci. Mo¿esz w³±czyæ
usuwanie przeplotu za pomoc± opcji <tt class="option">-vf pp=TYP_DEINT</tt>. Zwykle
<tt class="option">pp=lb</tt> spisuje siê dobrze, ale to kwestia gustu. Poczytaj o
innych algorytmach usuwania przeplotu na stronie man i zacznij eksperymentowaæ.
</p></li><li><p>
Usuwaj "martwe miejsca". Kiedy nagrywasz video, s± pewnie miejsca przy brzegach,
które s± zazwyczaj czarne lub zawieraj± szum. Jak siê ³atwo domy¶liæ,
niepotrzebnie wymagaj± wiêkszej przepustowo¶ci (dok³adniej, to nie same czarne
miejsca, lecz ostre przej¶cia pomiêdzy czarnym kolorem i ja¶niejszym obrazem
video, ale nie jest to akurat takie wa¿ne). Zanim zaczniesz nagrywaæ, ustaw
argumenty opcji <tt class="option">crop</tt> by wszystkie "¶mieci" na brzegach zosta³y
wyciête. Oczywi¶cie nie zapomnij o utrzymaniu prawid³owych wymiarów obrazu.
</p></li><li><p>
Uwa¿aj na obci±¿enie CPU. Nie powinno ono przekroczyæ granicy 90% przez
wiêkszo¶æ czasu. Je¶li masz du¿y bufor nagrywania,
<span class="application">MEncoder</span> mo¿e przetrwaæ przeci±¿enie przez najwy¿ej
kilka sekund i nic wiêcej. Lepiej wiêc wy³±czyæ wszystkie trójwymiarowe
wygaszacze OpenGL i inne tego typu bajery.
</p></li><li><p>
Nie mieszaj z zegarem systemowym. <span class="application">MEncoder</span> korzysta z
niego do synchronizacji A/V. Je¶li zmodyfikujesz zegar systemowy (zw³aszcza
wstecz), <span class="application">MEncoder</span> siê pogubi i utraci klatki. Jest to
bardzo wa¿na sprawa je¶li jeste¶ podpiêty do sieci i u¿ywasz do synchronizacji
czasu ró¿nych programów typu NTP. Musisz wy³±czyæ NTP w trakcie nagrywania,
je¶li chcesz, by by³o ono przeprowadzone niezawodnie.
</p></li><li><p>
Nie zmieniaj opcji <tt class="option">outfmt</tt>, chyba, ¿e wiesz co robisz lub Twoja
karta/sterownik naprawdê nie obs³uguje ustawienia domy¶lnego (przestrzeñ
kolorów YV12). W poprzednich wersjach
<span class="application">MPlayera</span>/<span class="application">MEncodera</span>
konieczne by³o podanie formatu wyj¶cia.
Ten problem powinien byæ rozwi±zany w aktualnych wydaniach i opcja
<tt class="option">outfmt</tt> nie jest ju¿ wymagana, a ustawienie domy¶lne powinno
pasowaæ ka¿demu. Na przyk³ad, je¶li nagrywasz do formatu DivX u¿ywaj±c
<code class="systemitem">libavcodec</code> i podasz opcjê <tt class="option">outfmt=RGB24</tt>
aby zwiêkszyæ jako¶æ nagrywanego obrazu, zostanie on i tak pó¼niej z
powrotem przekonwertowany do YV12, wiêc jedyne, co osi±gniesz, to ogromna
strata mocy obliczeniowej.
</p></li><li><p>
By u¿yæ przestrzeni kolorów I420 (<tt class="option">outfmt=i420</tt>), musisz dodaæ
opcjê <tt class="option">-vc rawi420</tt> z powodu konfliktu fourcc z kodekiem Intel
Indeo.
</p></li><li><p>
Jest kilka sposobów na nagrywanie audio. Mo¿esz nagrywaæ d¼wiêk za pomoc± Twojej
karty d¼wiêkowej korzystaj±c z zewnêtrznego kabla pomiêdzy kart± video i
wej¶ciem liniowym lub korzystaj±c z wbudowanego w uk³ad bt878 przetwornika ADC.
W tym drugim przypadku musisz za³adowaæ sterownik
<span class="bold"><strong>btaudio</strong></span>. Przeczytaj plik
<tt class="filename">linux/Documentation/sound/btaudio</tt> (w drzewie j±dra, a nie
<span class="application">MPlayera</span>) by dowiedzieæ siê jak korzystaæ z tego
sterownika.
</p></li><li><p>
Je¶li <span class="application">MEncoder</span> nie mo¿e otworzyæ urz±dzenia
d¼wiêkowego, upewnij siê, ¿e jest ono rzeczywi¶cie dostêpne. Zdarzaj± siê
problemy z serwerami d¼wiêku typu aRts (KDE) lub ESD (GNOME). Je¶li masz
kartê full-duplex (prawie wszystkie przyzwoite karty dostêpne obecnie obs³uguj±
tê funkcjê) i korzystasz z KDE, spróbuj zaznaczyæ opcjê "Dzia³anie w pe³ni
dupleksowe" ("full duplex") w konfiguracji serwera d¼wiêku.
</p></li></ul></div></div><div class="sect2" lang="pl"><div class="titlepage"><div><div><h3 class="title"><a name="tv-examples"></a>10.1.3. Przyk³ady</h3></div></div></div><div class="informalexample"><p>
Puste wyj¶cie, do AAlib :)
</p><pre class="screen">
mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://</pre><p>
</p></div><div class="informalexample"><p>
Wej¶cie ze standardowego V4L:
</p><pre class="screen">
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://</pre><p>
</p></div><div class="informalexample"><p>
Bardziej skomplikowany przyk³ad. Ka¿e on
<span class="application">MEncoderowi</span> nagraæ pe³en
obraz PAL, wykadrowaæ go i usun±æ przeplot korzystaj±c z algorytmu
liniowego zlewania (linear blend). Audio jest kompresowane ze sta³±
szybko¶ci± równ± 64kbps, korzystaj±c z kodeka LAME. To ustawienie jest
dobre do nagrywania filmów.
</p><pre class="screen">
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
     -oac mp3lame -lameopts cbr:br=64 \
     -vf crop=720:544:24:16,pp=lb -o <em class="replaceable"><code>wyjscie.avi</code></em> tv://
</pre><p>
</p></div><div class="informalexample"><p>
Ten przyk³ad dodatkowo przeskaluje obraz do 384x288 i skompresuje video
z szybko¶ci± 350kbps w trybie wysokiej jako¶ci. Opcja <tt class="option">vqmax</tt>
uwalnia kwantyzator i pozwala kompresorowi video na osi±gniêcie tak
niskiej szybko¶ci nawet kosztem jako¶ci obrazu. Mo¿e byæ to u¿ywane do
nagrywania d³ugich seriali TV, kiedy jako¶æ obrazu nie jest tak wa¿na.
</p><pre class="screen">
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
     -oac mp3lame -lameopts cbr:br=48 \
     -vf crop=720:540:24:18,pp=lb,scale=384:288 -sws 1 -o <em class="replaceable"><code>wyjscie.avi</code></em> tv://
</pre><p>
Jest równie¿ mo¿liwe podanie mniejszych wymiarów obrazu w opcji
<tt class="option">-tv</tt> i pominiêcie programowego skalowania, ale to podej¶cie
wykorzystuje maksymaln± ilo¶æ dostêpnych informacji i jest trochê bardziej
odporne na szum. Z powodu ograniczeñ sprzêtowych Uk³ady bt878 mog± stosowaæ
u¶rednianie pikseli jedynie w kierunku poziomym.
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tv.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="tv.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="radio.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">Rozdzia³ 10. TV </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> Rozdzia³ 11. Radio</td></tr></table></div></body></html>
