<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>14.3. Kódolás a libavcodec
  codec családdal</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="MPlayer - The Movie Player"><link rel="up" href="encoding-guide.html" title="14. fejezet - Kódolás a MEncoderrel"><link rel="prev" href="menc-feat-telecine.html" title="14.2. Mit kezdjünk a telecine-nel és az átlapolással NTSC DVD-ken"><link rel="next" href="menc-feat-xvid.html" title="14.4. Kódolás az XviD
codec-kal"><link rel="preface" href="howtoread.html" title="Hogyan olvasd ezt a dokumentációt"><link rel="chapter" href="intro.html" title="1. fejezet - Bevezetés"><link rel="chapter" href="install.html" title="2. fejezet - Telepítés"><link rel="chapter" href="usage.html" title="3. fejezet - Használat"><link rel="chapter" href="cd-dvd.html" title="4. fejezet - CD/DVD használat"><link rel="chapter" href="faq.html" title="5. fejezet - Gyakran ismételt kérdések"><link rel="chapter" href="containers.html" title="6. fejezet - Konténerek"><link rel="chapter" href="codecs.html" title="7. fejezet - Codec-ek"><link rel="chapter" href="video.html" title="8. fejezet - Videó kimeneti eszközök"><link rel="chapter" href="audio.html" title="9. fejezet - Audió kimeneti eszközök"><link rel="chapter" href="tv.html" title="10. fejezet - TV"><link rel="chapter" href="radio.html" title="11. fejezet - Rádió"><link rel="chapter" href="ports.html" title="12. fejezet - Portok"><link rel="chapter" href="mencoder.html" title="13. fejezet - A MEncoder használatának alapjai"><link rel="chapter" href="encoding-guide.html" title="14. fejezet - Kódolás a MEncoderrel"><link rel="appendix" href="bugreports.html" title="A. függelék - Hogyan jelentsd a hibákat"><link rel="appendix" href="bugs.html" title="B. függelék - Ismert hibák"><link rel="appendix" href="skin.html" title="C. függelék - MPlayer skin formátum"><link rel="appendix" href="history.html" title="D. függelék - Történelem"><link rel="subsection" href="menc-feat-enc-libavcodec.html#menc-feat-enc-libavcodec-video-codecs" title="14.3.1. A libavcodec videó codec-jei"><link rel="subsection" href="menc-feat-enc-libavcodec.html#menc-feat-enc-libavcodec-audio-codecs" title="14.3.2. A libavcodec audió codec-jei"><link rel="subsection" href="menc-feat-enc-libavcodec.html#menc-feat-dvd-mpeg4-lavc-encoding-options" title="14.3.3. A libavcodec kódolási opciói"><link rel="subsection" href="menc-feat-enc-libavcodec.html#menc-feat-mpeg4-lavc-example-settings" title="14.3.4. Kódolás beállítási példák"><link rel="subsection" href="menc-feat-enc-libavcodec.html#custommatrices" title="14.3.5. Egyedi inter/intra matricák"><link rel="subsection" href="menc-feat-enc-libavcodec.html#menc-feat-dvd-mpeg4-example" title="14.3.6. Példa"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.3. Kódolás a <code class="systemitem">libavcodec</code>
  codec családdal</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="menc-feat-telecine.html">El&#337;z&#337;</a> </td><th width="60%" align="center">14. fejezet - Kódolás a <span class="application">MEncoder</span>rel</th><td width="20%" align="right"> <a accesskey="n" href="menc-feat-xvid.html">Következ&#337;</a></td></tr></table><hr></div><div class="sect1" lang="hu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-libavcodec"></a>14.3. Kódolás a <code class="systemitem">libavcodec</code>
  codec családdal</h2></div></div></div><p>
A <a href="video-codecs.html#ffmpeg" title="7.1.1. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>
számos érdekes videó és audió formátumba történ&#337; egyszer&#369; kódolást biztosít.
A következ&#337; codec-ekbe kódolhatsz (többé-kevésbé friss lista):
</p><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-video-codecs"></a>14.3.1. A <code class="systemitem">libavcodec</code> videó codec-jei</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Videó codec neve</th><th>Leírás</th></tr></thead><tbody><tr><td>mjpeg</td><td>
   Motion JPEG
  </td></tr><tr><td>ljpeg</td><td>
   veszteségmentes JPEG
  </td></tr><tr><td>h261</td><td>
  H.261
  </td></tr><tr><td>h263</td><td>
  H.263
  </td></tr><tr><td>h263p</td><td>
  H.263+
  </td></tr><tr><td>mpeg4</td><td>
  ISO szabvány MPEG-4 (DivX6, XviD kompatibilis)
  </td></tr><tr><td>msmpeg4</td><td>
  Szabvány el&#337;tti MPEG-4 variáns az MS-t&#337;l, v3 (AKA DivX3)
  </td></tr><tr><td>msmpeg4v2</td><td>
  Szabvány el&#337;tti MPEG-4 az MS-t&#337;l, v2 (régi ASF fájlokban használják)
  </td></tr><tr><td>wmv1</td><td>
  Windows Media Video, 1-es verzió (AKA WMV7)
  </td></tr><tr><td>wmv2</td><td>
  Windows Media Video, 2-es verzió (AKA WMV8)
  </td></tr><tr><td>rv10</td><td>
  RealVideo 1.0
  </td></tr><tr><td>rv20</td><td>
  RealVideo 2.0
  </td></tr><tr><td>mpeg1video</td><td>
  MPEG-1 videó
  </td></tr><tr><td>mpeg2video</td><td>
  MPEG-2 videó
  </td></tr><tr><td>huffyuv</td><td>
  veszteségmentes tömörítés
  </td></tr><tr><td>asv1</td><td>
  ASUS Video v1
  </td></tr><tr><td>asv2</td><td>
  ASUS Video v2
  </td></tr><tr><td>ffv1</td><td>
  az FFmpeg veszteségmentes videó codec-je
  </td></tr><tr><td>svq1</td><td>
  Sorenson video 1
  </td></tr><tr><td>flv</td><td>
  Flash Videókban használt Sorenson H.263
  </td></tr><tr><td>dvvideo</td><td>
  Sony Digital Video
  </td></tr><tr><td>snow</td><td>
  az FFmpeg kísérleti wavelet-alapú codecja
  </td></tr></tbody></table></div><p>

Az els&#337; oszlop a codec neveket tartalmazza, amit a <code class="literal">vcodec</code>
opció után kell megadni, például: <tt class="option">-lavcopts vcodec=msmpeg4</tt>
</p><div class="informalexample"><p>
Egy példa MJPEG tömörítéssel:
</p><pre class="screen">mencoder dvd://2 -o title2.avi -ovc lavc -lavcopts vcodec=mjpeg -oac copy</pre><p>
</p></div></div><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs"></a>14.3.2. A <code class="systemitem">libavcodec</code> audió codec-jei</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Audió codec neve</th><th>Leírás</th></tr></thead><tbody><tr><td>mp2</td><td>MPEG Layer 2</td></tr><tr><td>ac3</td><td>AC3, AKA Dolby Digital</td></tr><tr><td>adpcm_ima_wav</td><td>IMA adaptív PCM (4 bit mintánként, 4:1-es tömörítés)</td></tr><tr><td>sonic</td><td>kísérleti veszteséges/veszteségmentes codec</td></tr></tbody></table></div><p>

Az els&#337; oszlop a codec neveket tartalmazza, amit az <code class="literal">acodec</code>
opció után kell megadni, például: <tt class="option">-lavcopts acodec=ac3</tt>
</p><div class="informalexample"><p>
Egy példa AC3 tömörítéssel:
</p><pre class="screen">mencoder dvd://2 -o title2.avi -oac lavc -lavcopts acodec=ac3 -ovc copy</pre><p>
</p></div><p>
  Ellentétben a <code class="systemitem">libavcodec</code> videó
  codec-jeivel, az audió codec-jei nem használnak el annyi bit-et, amennyit
  szánsz nekik, mivel hiányzik bel&#337;lük némi minimális pszichoakusztikus modell
  (ha van egyáltalán), ami a legtöbb egyéb codec implementációban benne van.
  Azonban vedd figyelembe, hogy ezek az audió codec-ek nagyon gyorsak és
  azonnal használhatóak bárhol, ahol a <span class="application">MEncoder</span>t
  a <code class="systemitem">libavcodec</code>-kel együtt fordították le
  (ami a legtöbb esetben így van), és nem függ küls&#337; függvénykönyvtáraktól.
</p></div><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-lavc-encoding-options"></a>14.3.3. A libavcodec kódolási opciói</h3></div></div></div><p>
  Ideális esetben szeretnéd, ha csak azt kellene mondani a kódolónak, hogy
  váltson "jobb min&#337;ségre" és kész.
  Ez szép is lenne, de sajnos nehezen megvalósítható, mert a különböz&#337; kódolási
  opciók különböz&#337; min&#337;séget eredményeznek, mely függ a forrás anyagtól is.
  Ez azért van, mert a tömörítés függ a szóbanforgó videó vizuális tulajdonságaitól.
  Például az anime és az él&#337; felvétel két nagyon különböz&#337; anyag és így
  különböz&#337; opciókat követelnek meg az optimális kódoláshoz.
  A jó hír, hogy néhány opciót soha sem lehet elhagyni, mint például az
  <tt class="option">mbd=2</tt>, <tt class="option">trell</tt> és <tt class="option">v4mv</tt>.
  Olvass tovább a gyakori kódolási opciók leírásához.
</p><div class="itemizedlist"><p class="title"><b>Állítható opciók:</b></p><ul type="disc"><li><p>
  <span class="bold"><strong>vmax_b_frames</strong></span>: 1 vagy 2 a jó, a filmt&#337;l
  függ&#337;en.
  Figyelj rá, hogy úgy kell kódolnod, hogy DivX5-tel dekódolható legyen az
  eredmény, aktiválnod kell a zárt GOP támogatást a
  <code class="systemitem">libavcodec</code> <tt class="option">cgop</tt>
  opciójával, de ki kell kapcsolnod a jelenet detektálást, ami
  nem túl jó ötlet, mivel rontja a kódolási hatékonyságot egy kicsit.
</p></li><li><p>
  <span class="bold"><strong>vb_strategy=1</strong></span>: segít a gyors mozgású jeleneteknél.
  Néhány videónál a vmax_b_frames rontja a min&#337;séget, de a vmax_b_frames=2 a
  vb_strategy=1-gyel együtt segít.
</p></li><li><p>
  <span class="bold"><strong>dia</strong></span>: mozgás keres&#337; tartomány. A nagyobb a
  jobb és a lassabb.
  Negatív értékek teljesen más skálát adnak.
  A jó értékek -1 a gyors kódoláshoz vagy 2-4 a lassabbhoz.
</p></li><li><p>
  <span class="bold"><strong>predia</strong></span>: mozgás keres&#337; el&#337;re-lépés.
  Nem olyan fontos, mint a dia. Jó értékek 1-t&#337;l (alapértelmezett) 4-ig.
  preme=2 kell hozzá, hogy igazán hasznos legyen.
</p></li><li><p>
  <span class="bold"><strong>cmp, subcmp, precmp</strong></span>: Összehasonlító funkciók
  a mozgás becsléshez.
  Kísérletezz a 0 (alapértelmezett), 2 (hadamard), 3 (dct) és 6 (ráta
  torzítás) értékekkel!
  0 a leggyorsabb és és elegend&#337; a precmp-hez.
  A cmp-hez és subcmp-hez 2 jó, ha anime és 3 ha él&#337; akció.
  A 6 vagy jobb vagy nem, de mindenképpen lassabb.
</p></li><li><p>
  <span class="bold"><strong>last_pred</strong></span>: Az el&#337;z&#337; képkockából megjósolandó
  mozgások száma.
  1-3 vagy hasonló segít egy kis sebességcsökkenés árán.
  A magasabb értékek lassúak, de igazi hasznuk nincs.
</p></li><li><p>
  <span class="bold"><strong>cbp, mv0</strong></span>: A makroblokkok kiválasztását
  irányítja. Egy kis sebességcsökkenés egy kis min&#337;ségjavulásért.
</p></li><li><p>
  <span class="bold"><strong>qprd</strong></span>: adaptív kvantálás, mely a makroblokk
  komplexitásán alapul.
  Vagy segít vagy nem, a videó és egyéb opciók függvényében.
  Ennek lehetnek mellékhatásai, hacsak nem állítod be a vqmax-ot valami
  ésszer&#369;en alacsony értékre (a 6 jó, talán minimum 4); a vqmin=1 is segíthet.
</p></li><li><p>
  <span class="bold"><strong>qns</strong></span>: nagyon lassú, különösen ha a
  qprd-vel kombinálod.
  Ezen opció hatására a kódoló minimalizálja a zajt tömörítési mellékhatásokkal,
  ahelyett, hogy a szigorúan a forráshoz próbálna igazodni.
  Ne használd ezt, csak ha már minden mást kipróbáltál és az eredmény még
  mindig nem elég jó.
</p></li><li><p>
  <span class="bold"><strong>vqcomp</strong></span>: Rátaírányítás beállítása.
  Hogy milyen értékek jók, az a filmt&#337;l függ.
  Nyugodtan elhagyhatod ezt, ha akarod.
  A vqcomp csökkentése több bitet engedélyez az alacsony komplexitású részeknél,
  a növelése a nagy komplexitású részekre teszi &#337;ket (alapértelmezés: 0.5,
  tartomány: 0-1, javasolt tartomány: 0.5-0.7).
</p></li><li><p>
  <span class="bold"><strong>vlelim, vcelim</strong></span>: Beállítja a szimpla együttható
  eliminációs küszöböt a fényer&#337;sséghez és a chroma plane-khez.
  Ezt elkülönítve kódolja le minden MPEG-szer&#369; algorítmus.
  Az ötlet emögött az opció mögött az, hogy egy jó heurisztikát használnak
  annak megállapítására, hogy a blokkban történt változás kisebb-e, mint az
  általad megadott küszöb és ebben az esetben egyszer&#369;en "változtatás nélkül"
  kerül elkódolásra a blokk.
  Ez biteket ment meg és talán gyorsít is a kódoláson. A vlelim=-4 és
  vcelim=9 látszólag jók az él&#337; filmekhez, de nem segítenek az anime-nál;
  ha animációt kódolsz, inkább hagyd &#337;ket változatlanul.
</p></li><li><p>
  <span class="bold"><strong>qpel</strong></span>: Negyed pixel mozgás becslés.
  Az MPEG-4 fél pixeles precíziót használ a mozgáskereséshez alapértelmezésként,
  ezért ez az opció plusz terhelést hoz, mivel több információ tárolódik az
  elkódolt fájlban. A tömörítési nyereség/veszteség a filmt&#337;l függ, de
  általában nem hatékony anime-oknál.
  A qpel mindig jelent&#337;s dekódolási CPU id&#337; igénnyel jár (+25% a gyakorlatban).
</p></li><li><p>
  <span class="bold"><strong>psnr</strong></span>: nem érinti az aktuális kódolást,
  de készít egy log fájlt, mely megadja minden képkocka típusát/méretét/min&#337;ségét
  és a végére odaírja a PSNR-t (Peak Signal to Noise Ratio, Zajarány csúcspontja).
</p></li></ul></div><div class="itemizedlist"><p class="title"><b>Opciók, melyekkel nem javasolt játszadozni:</b></p><ul type="disc"><li><p>
  <span class="bold"><strong>vme</strong></span>: Az alapértelmezett a legjobb.
</p></li><li><p>
  <span class="bold"><strong>lumi_mask, dark_mask</strong></span>: Pszichovizuális
  adaptív kvantálás.
  Ne játszadozz ezekkel az opciókkal, ha számít a min&#337;ség.
  Az ésszer&#369; értékek jók lehetnek a te esetedben, de vigyázz, ez nagyon
  szubjektív.
</p></li><li><p>
  <span class="bold"><strong>scplx_mask</strong></span>: Megpróbálja megel&#337;zni a
  blokkos mellékhatásokat, de az utófeldolgozás jobb.
</p></li></ul></div></div><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-mpeg4-lavc-example-settings"></a>14.3.4. Kódolás beállítási példák</h3></div></div></div><p>
  A következ&#337; beállítások példák különböz&#337; kódolási opciók kombinációjára,
  amik a sebesség vs min&#337;ség kérdést dönt&#337;en befolyásolják ugyanazon
  cél bitráta mellett.
</p><p>
  Az összes kódolási beállítást egy 720x448 @30000/1001 fps-es példa videón
  teszteltük, a cél bitráta 900kbps volt, a gép pedig egy
  AMD-64 3400+ 2400 MHz-en 64 bites módban.
  Mindegyik kódolási beállítás tartalmazza a kódolási sebességet (képkocka per
  másodpercben) és a PSNR veszteséget (dB-ben) a "nagyon jó min&#337;séghez"
  viszonyítva.
  Kérlek vedd figyelembe, hogy a forrásanyagodtól, a géped típusától és
  a fejlesztésekt&#337;l függ&#337;en különböz&#337; eredményeket kaphatsz.
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Leírás</th><th>Kódolási opciók</th><th>sebesség (fps-ben)</th><th>Relatív PSNR veszteség (dB-ben)</th></tr></thead><tbody><tr><td>Nagyon jó min&#337;ség</td><td><tt class="option">vcodec=mpeg4:mbd=2:mv0:trell:v4mv:cbp:last_pred=3:predia=2:dia=2:vmax_b_frames=2:vb_strategy=1:precmp=2:cmp=2:subcmp=2:preme=2:qns=2</tt></td><td>6fps</td><td>0dB</td></tr><tr><td>Jó min&#337;ség</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:last_pred=2:dia=-1:vmax_b_frames=2:vb_strategy=1:cmp=3:subcmp=3:precmp=0:vqcomp=0.6:turbo</tt></td><td>15fps</td><td>-0.5dB</td></tr><tr><td>Gyors</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:turbo</tt></td><td>42fps</td><td>-0.74dB</td></tr><tr><td>Valós idej&#369;</td><td><tt class="option">vcodec=mpeg4:mbd=2:turbo</tt></td><td>54fps</td><td>-1.21dB</td></tr></tbody></table></div><p>
</p></div><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="custommatrices"></a>14.3.5. Egyedi inter/intra matricák</h3></div></div></div><p>
A <a href="video-codecs.html#ffmpeg" title="7.1.1. FFmpeg/libavcodec"><code class="systemitem">libavcodec</code></a>
ezen képességével egyedi inter (I-frame/kulcs frame) és intra
(P-frame/jósolt frame) matricákat állíthatsz be. Több codec támogatja ezt: az
<code class="systemitem">mpeg1video</code> és <code class="systemitem">mpeg2video</code>
a jelentések szerint m&#369;ködik.
</p><p>
Ennek egy tipikus felhasználása a <a href="http://www.kvcd.net/" target="_top">KVCD</a>
által javasolt matricák beállítása.
</p><p>
Egy <span class="bold"><strong>KVCD "Notch" Kvantálási Mátrix:</strong></span>
</p><p>
Intra:
</p><pre class="screen">
 8  9 12 22 26 27 29 34
 9 10 14 26 27 29 34 37
12 14 18 27 29 34 37 38
22 26 27 31 36 37 38 40
26 27 29 36 39 38 40 48
27 29 34 37 38 40 48 58
29 34 37 38 40 48 58 69
34 37 38 40 48 58 69 79
</pre><p>

Inter:
</p><pre class="screen">
16 18 20 22 24 26 28 30
18 20 22 24 26 28 30 32
20 22 24 26 28 30 32 34
22 24 26 30 32 32 34 36
24 26 28 32 34 34 36 38
26 28 30 32 34 36 38 40
28 30 32 34 36 38 42 42
30 32 34 36 38 40 42 44
</pre><p>
</p><p>
Használat:
</p><pre class="screen">
$ mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>output.avi</code></em> -oac copy -ovc lavc -lavcopts inter_matrix=...:intra_matrix=...
</pre><p>
</p><p>
</p><pre class="screen">
$ mencoder <em class="replaceable"><code>input.avi</code></em> -ovc lavc -lavcopts
vcodec=mpeg2video:intra_matrix=8,9,12,22,26,27,29,34,9,10,14,26,27,29,34,37,
12,14,18,27,29,34,37,38,22,26,27,31,36,37,38,40,26,27,29,36,39,38,40,48,27,
29,34,37,38,40,48,58,29,34,37,38,40,48,58,69,34,37,38,40,48,58,69,79
:inter_matrix=16,18,20,22,24,26,28,30,18,20,22,24,26,28,30,32,20,22,24,26,
28,30,32,34,22,24,26,30,32,32,34,36,24,26,28,32,34,34,36,38,26,28,30,32,34,
36,38,40,28,30,32,34,36,38,42,42,30,32,34,36,38,40,42,44 -oac copy -o svcd.mpg
</pre><p>
</p></div><div class="sect2" lang="hu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-example"></a>14.3.6. Példa</h3></div></div></div><p>
  Nos hát, éppen most vetted meg a Harry Potter és a titkok kamrája gyönyör&#369;
  új példányát (widescreen edition természetesen) és le akarod rip-pelni
  ezt a DVD-t, hogy hozzáadhasd a PC-s házimozidhoz. Ez egy régió 1-es
  DVD, így NTSC-s. Az alábbi példa egyszer&#369;en alkalmazható PAL-ra is, a
  <tt class="option">-ofps 24000/1001</tt> kapcsoló elhagyásával (mert a kimeneti
  frameráta ugyan annyi, mint a bemeneti) és természetesen a vágás méretei
  is mások lesznek.
</p><p>
  Miután lefuttattad az <tt class="option">mplayer dvd://1</tt> parancsot, kövesd
  a <a href="menc-feat-telecine.html" title="14.2. Mit kezdjünk a telecine-nel és az átlapolással NTSC DVD-ken">mit kezdjünk a telecine-nel és az
  átlapolással NTSC DVD-ken</a> részben leírt utasításokat és fedezd
  fel, hogy ez egy 24000/1001 fps-es progresszív videó, ami azt jelenti,
  hogy nem kell inverz telecine sz&#369;r&#337;t használnod, mint pl. a
  <tt class="option">pullup</tt> vagy a <tt class="option">filmdint</tt>.
</p><p>
  Következ&#337;nek megállapítjuk a megfelel&#337; vágási téglalapot, így használjuk a
  cropdetect sz&#369;r&#337;t:

  </p><pre class="screen">mplayer dvd://1 -vf cropdetect</pre><p>

  Gy&#337;z&#337;dj meg róla, hogy egy teljesen kitöltött képkockán állsz (pl. egy világos
  jelenet), ezt fogod látni az <span class="application">MPlayer</span> konzol kimenetén:

  </p><pre class="screen">crop area: X: 0..719  Y: 57..419  (-vf crop=720:362:0:58)</pre><p>

  Ezután lejátszuk a filmet ezzel a sz&#369;r&#337;vel a számok ellenérzéséhez:

  </p><pre class="screen">mplayer dvd://1 -vf crop=720:362:0:58</pre><p>

  És azt látjuk, hogy tökéletesen megfelel. Majd meggy&#337;z&#337;dünk, hogy a
  szélesség és a magasság osztható 16-tal. A szélesség jó, de a magasság
  nem. Mivel nem buktunk hetedik osztályban matekból, tudjuk, hogy a 16
  legközelebbi többszöröse, ami kisebb, mint 362, a 352.
</p><p>
  Így egyszer&#369;en használhatjuk a <tt class="option">crop=720:352:0:58</tt> opciót,
  de jó lenne egy kicsit lecsípni a telejéb&#337;l és az aljából, hogy középen
  maradjunk. Összehúzzuk a magasságot 10 pixellel, de nem akarjuk növelni
  az y-offszetet 5 pixellel, mert az páratlan szám és rontja a min&#337;séget.
  Helyette inkább 4 pixellel növeljük az y-offszetet:

  </p><pre class="screen">mplayer dvd://1 -vf crop=720:352:0:62</pre><p>

  A másik ok, hogy lecsípjünk pixeleket mid fent, mint lent, hogy biztosak
  legyünk, hogy a fél-fekete pixeleket is levágtuk, amennyiben vannak.
  Figyelj rá, hogy ha a videó telecine-lt, a <tt class="option">pullup</tt> sz&#369;r&#337;
  (vagy bármelyik inverz telecine sz&#369;r&#337;, amit használsz) a vágás el&#337;tt
  szerepeljen a sz&#369;r&#337;k láncában. Ha átlapolt, végezz deinterlace-t a vágás
  el&#337;tt. (Ha úgy döntesz, hogy megtartod az átlapolt videót, gy&#337;z&#337;dj meg
  róla, hogy a függ&#337;leges vágási offszet 4 többszöröse.)
</p><p>
  Ha érdekel annak a 10 pixelnek az elvesztése, inkább a méretek 16
  legközelebbi többszörösére való kicsinyítése érdekelhet. A sz&#369;r&#337; lánc
  ez esetben:

  </p><pre class="screen">-vf crop=720:362:0:58,scale=720:352</pre><p>

  A videó ilyen módon történ&#337; lekicsinyítése azt jelenti, hogy néhány
  apró részlet elveszik, de ez valószín&#369;leg nem lesz észrevehet&#337;. A
  nagyítás rosszabb min&#337;séget eredményez (hacsak nem növeled a bitrátát).
  A vágás az összes ilyen pixelt&#337;l megszabadít. Ez egy üzlet, amit minden
  esetben meg kell fontolnod. például ha a DVD videó televízióra készült,
  ajánlott elkerülni a függ&#337;leges méretezést, mert a sor mintázás az
  eredeti felvételhez igazodik.
</p><p>
  Megtekintés után azt látjuk, hogy a filmünk eléggé eseménydús és
  nagyon részletes, így 2400Kbit-et választunk bitrátának.
</p><p>
  Most már készen vagyunk a két lépéses kódoláshoz. Els&#337; lépés:

  </p><pre class="screen">mencoder dvd://1 -ofps 24000/1001 -oac copy -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2 -ovc lavc \
-lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:mbcmp=3:autoaspect:vpass=1 \
-o Harry_Potter_2.avi</pre><p>

  A második lépés ugyan ez, csak megadjuk a <tt class="option">vpass=2</tt>-t:

  </p><pre class="screen">mencoder dvd://1 -ofps 24000/1001 -oac copy -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2 -ovc lavc \
-lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:mbcmp=3:autoaspect:vpass=2 \
-o Harry_Potter_2.avi</pre><p>
</p><p>
  A <tt class="option">v4mv:mbd=2:trell</tt> kapcsolók nagyban javítják a min&#337;séget
  a kódolási id&#337; rovására. Nem ajánlott ezen opciók elhagyása, ha a f&#337; cél a
  jó min&#337;ség. A <tt class="option">cmp=3:subcmp=3:mbcmp=3</tt> opciók egy
  összehasonlító függvényt választanak ki, ami jobb min&#337;séget biztosít, mint
  az alapértelmezettek. Ezzel a paraméterrel is kísérletezhetsz (lásd a man
  oldalt a lehetséges értékekért), mivel a különböz&#337; függvények nagyban
  befolyásolják a min&#337;séget a forrás anyagtól függ&#337;en. Például ha úgy találod,
  hogy a <code class="systemitem">libavcodec</code> túl
  kockás eredményt ad, megpróbálhatod a kísérleti NSSE összehasonlító
  függvény használatát a <tt class="option">*cmp=10</tt> opcióval.
</p><p>
  Ennél a filmnél a keletkez&#337; AVI 138 perc hosszú lesz és közel 3 GB-os. És
  mivel azt mondtuk, hogy a fájl méret nem számít, ez egy tökéletesen megfelel&#337;
  méret. De ha kisebbet szeretnél, próbálj ki egy alacsonyabb bitrátát. A bitráták
  növelése csökken&#337; mérték&#369; javulást hoz, így pl. tisztán kivehet&#337; a különbség
  az 1800Kbit és a 2000Kbit között, szinte észrevehetetlen 2000Kbit felett.
  Nyugodtan kísérletezz, amíg csak kedved tartja.
</p><p>
  Mivel a forrás videót áteresztettük a zajeltávolító sz&#369;r&#337;n, talán egy picit
  vissza akarsz tenni a lejátszás közben. Ez, az <tt class="option">spp</tt>
  utófeldolgozó sz&#369;r&#337;vel drasztikusan javítja a felfogható min&#337;séget és
  segít a segít a videó kockásodásának megszüntetésében. Az
  <span class="application">MPlayer</span> <tt class="option">autoq</tt> opciójával
  szabályozhatod az spp sz&#369;r&#337; utófeldolgozásának mértékét a CPU-tól függ&#337;en.
  Emellett valószín&#369;leg gamma és/vagy szín korrekciót is szeretnél csinálni,
  hogy jobban illeszkedjen a monitorodhoz. Például:

  </p><pre class="screen">mplayer Harry_Potter_2.avi -vf spp,noise=9ah:5ah,eq2=1.2 -autoq 3</pre><p>  

</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="menc-feat-telecine.html">El&#337;z&#337;</a> </td><td width="20%" align="center"><a accesskey="u" href="encoding-guide.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="menc-feat-xvid.html">Következ&#337;</a></td></tr><tr><td width="40%" align="left" valign="top">14.2. Mit kezdjünk a telecine-nel és az átlapolással NTSC DVD-ken </td><td width="20%" align="center"><a accesskey="h" href="index.html">Tartalom</a></td><td width="40%" align="right" valign="top"> 14.4. Kódolás az <code class="systemitem">XviD</code>
codec-kal</td></tr></table></div></body></html>
